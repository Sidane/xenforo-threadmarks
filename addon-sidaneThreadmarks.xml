<?xml version="1.0" encoding="utf-8"?>
<addon addon_id="sidaneThreadmarks" title="Threadmarks" version_string="1.4.0" version_id="1040006" url="https://xenforo.com/community/resources/threadmarks.3939/" install_callback_class="Sidane_Threadmarks_Install" install_callback_method="install" uninstall_callback_class="Sidane_Threadmarks_Install" uninstall_callback_method="uninstall">
  <admin_navigation>
    <navigation navigation_id="sidane_tm_categories" parent_navigation_id="threadsPosts" display_order="5" link="threadmark-categories" admin_permission_id="sidane_threadmarks" debug_only="0" hide_no_children="0"/>
  </admin_navigation>
  <admin_permissions>
    <admin_permission admin_permission_id="sidane_threadmarks" display_order="121"/>
  </admin_permissions>
  <admin_style_properties/>
  <admin_templates>
    <template title="sidane_threadmarks_category_delete"><![CDATA[<xen:title>{xen:phrase sidane_confirm_deletion_of_threadmark_category}: {$threadmarkCategory.title}</xen:title>
<xen:h1>{xen:phrase sidane_confirm_deletion_of_threadmark_category}</xen:h1>

<xen:navigation>
	<xen:breadcrumb href="{xen:adminlink 'threadmark-categories/edit', $threadmarkCategory}">{$threadmarkCategory.title}</xen:breadcrumb>
</xen:navigation>

<xen:require css="public:delete_confirmation.css" />

<xen:form action="{xen:adminlink 'threadmark-categories/delete', $threadmarkCategory}" class="deleteConfirmForm formOverlay">
	<p>{xen:phrase sidane_please_confirm_that_you_want_to_delete_following_threadmark_category}:</p>

	<strong><a href="{xen:adminlink 'threadmark-categories/edit', $threadmarkCategory}">{$threadmarkCategory.title}</a></strong>

	<p>{xen:phrase sidane_confirm_delete_threadmark_category_footnote}</p>

	<xen:submitunit save="{xen:phrase sidane_delete_threadmark_category}" />

	<input type="hidden" name="_xfConfirm" value="1" />
</xen:form>]]></template>
    <template title="sidane_threadmarks_category_edit"><![CDATA[<xen:title>{xen:if '{$threadmarkCategory.threadmark_category_id}', '{xen:phrase sidane_edit_threadmark_category}: {$threadmarkCategory.title}', '{xen:phrase sidane_create_new_threadmark_category}'}</xen:title>

<xen:if is="{$threadmarkCategory.threadmark_category_id}">
	<xen:navigation>
		<xen:breadcrumb href="{xen:adminlink threadmark-categories}#{xen:helper listitemid, $threadmarkCategory.threadmark_category_id}">{$threadmarkCategory.title}</xen:breadcrumb>
	</xen:navigation>
</xen:if>

<xen:form class="AutoValidator"
	action="{xen:adminlink 'threadmark-categories/save', $threadmarkCategory}"
	data-redirect="on">

	<xen:textboxunit label="{xen:phrase title}:" name="title" value="{$threadmarkCategory.title}" data-optinout="OptOut" data-livetitletemplate="{xen:if {$threadmarkCategory.threadmark_category_id},
		'{xen:phrase sidane_edit_threadmark_category}: <em>%s</em>',
		'{xen:phrase sidane_create_new_threadmark_category}: <em>%s</em>'}" />

	<xen:spinboxunit label="{xen:phrase display_order}:" name="display_order" value="{$threadmarkCategory.display_order}" min="0" step="10" />

	<xen:checkboxunit id="allowedUserGroups" label="{xen:phrase sidane_allowed_user_groups}:" name="allowed_user_group_ids[]" listclass="checkboxColumns">
		<xen:hint><br /><label><input type="checkbox" class="CheckAll" data-target="#allowedUserGroups" /> {xen:phrase select_all}</label></xen:hint>
		<xen:options source="$userGroups" />
	</xen:checkboxunit>

	<xen:submitunit save="{xen:phrase sidane_save_threadmark_category}">
		<xen:if is="{$threadmarkCategory.threadmark_category_id}"><a href="{xen:adminlink 'threadmark-categories/delete', $threadmarkCategory}" class="button OverlayTrigger">{xen:phrase sidane_delete_threadmark_category}...</a></xen:if>
	</xen:submitunit>
</xen:form>]]></template>
    <template title="sidane_threadmarks_category_list"><![CDATA[<xen:title>{xen:phrase sidane_threadmark_categories}</xen:title>

<xen:topctrl>
	<a href="{xen:adminlink threadmark-categories/add}" class="button">+ {xen:phrase sidane_create_new_threadmark_category}</a>
</xen:topctrl>

<xen:require css="filter_list.css" />
<xen:require js="js/xenforo/filter_list.js" />

<xen:form action="{xen:adminlink threadmark-categories}" class="section">
	<xen:if is="{$threadmarkCategories}">
		<h2 class="subHeading">
			<xen:include template="filter_list_controls" />
			{xen:phrase sidane_threadmark_categories}
		</h2>

		<ol class="FilterList Scrollable">
			<xen:foreach loop="$threadmarkCategories" key="$threadmarkCategoryId" value="$threadmarkCategory">
				<xen:listitem
					id="{$threadmarkCategory.threadmark_category_id}"
					label="{$threadmarkCategory.title}"
					href="{xen:adminlink threadmark-categories/edit, $threadmarkCategory}"
					delete="{xen:adminlink threadmark-categories/delete, $threadmarkCategory}" />
			</xen:foreach>
		</ol>

		<p class="sectionFooter">{xen:phrase showing_x_of_y_items, 'count=<span class="FilterListCount">{xen:count $threadmarkCategories}</span>', 'total={xen:count $threadmarkCategories}'}</p>
	<xen:else />
		<div class="noResults">{xen:phrase sidane_no_threadmark_categories_have_been_defined}</div>
	</xen:if>
</xen:form>]]></template>
    <template title="tools_rebuild_threadmarks"><![CDATA[<xen:form action="{xen:adminlink 'tools/trigger-deferred'}">
	<h2 class="subHeading">{xen:phrase rebuild_threadmarks}</h2>
	<xen:spinboxunit name="options[batch]" value="100" step="50" min="1" label="{xen:phrase items_to_process_per_page}:" />

	<xen:submitunit save="{xen:phrase rebuild_now}" />
	<input type="hidden" name="cache" value="Sidane_Threadmarks_Deferred_Cache" />
</xen:form>
]]></template>
  </admin_templates>
  <admin_template_modifications>
    <modification template="tools_rebuild" modification_key="threadmarks_tools_rebuild" description="Add the builders for threadmarks" execution_order="10" enabled="1" action="preg_replace">
      <find><![CDATA[/$/]]></find>
      <replace><![CDATA[<xen:include template="tools_rebuild_threadmarks" />]]></replace>
    </modification>
  </admin_template_modifications>
  <code_events/>
  <code_event_listeners>
    <listener event_id="load_class_controller" execute_order="3939" callback_class="Sidane_Threadmarks_Listener" callback_method="load_class" active="1" hint="XenForo_ControllerPublic_Thread" description="XenForo_ControllerPublic_Thread"/>
    <listener event_id="load_class_controller" execute_order="3939" callback_class="Sidane_Threadmarks_Listener" callback_method="load_class" active="1" hint="XenForo_ControllerPublic_Post" description="XenForo_ControllerPublic_Post"/>
    <listener event_id="load_class_datawriter" execute_order="3939" callback_class="Sidane_Threadmarks_Listener" callback_method="load_class" active="1" hint="XenForo_DataWriter_DiscussionMessage_Post" description="XenForo_DataWriter_DiscussionMessage_Post"/>
    <listener event_id="load_class_model" execute_order="3939" callback_class="Sidane_Threadmarks_Listener" callback_method="load_class" active="1" hint="XenForo_Model_Post" description="XenForo_Model_Post"/>
    <listener event_id="load_class_model" execute_order="3939" callback_class="Sidane_Threadmarks_Listener" callback_method="load_class" active="1" hint="XenForo_Model_Draft" description="XenForo_Model_Draft"/>
    <listener event_id="load_class_model" execute_order="3939" callback_class="Sidane_Threadmarks_Listener" callback_method="load_class" active="1" hint="XenES_Model_Elasticsearch" description="XenES_Model_Elasticsearch"/>
    <listener event_id="load_class_view" execute_order="10" callback_class="Sidane_Threadmarks_Listener" callback_method="load_class" active="1" hint="XenForo_ViewPublic_Thread_ThreadmarksLoadTree" description="XenForo_ViewPublic_Thread_ThreadmarksLoadTree"/>
  </code_event_listeners>
  <cron/>
  <email_templates/>
  <email_template_modifications/>
  <optiongroups>
    <group group_id="sidaneThreadmarks" display_order="30000" debug_only="0"/>
    <option option_id="sidaneThreadmarksHideMenuFromGuests" edit_format="onoff" data_type="boolean" can_backup="1">
      <default_value>0</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="sidaneThreadmarks" display_order="1"/>
    </option>
    <option option_id="sidaneThreadmarksNavLinks" edit_format="onoff" data_type="boolean" can_backup="1">
      <default_value>1</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="sidaneThreadmarks" display_order="10"/>
    </option>
  </optiongroups>
  <permissions>
    <permission_groups/>
    <permissions>
      <permission permission_group_id="forum" permission_id="sidane_tm_add" permission_type="flag" default_value="unset" interface_group_id="forumPermissions" display_order="1230"/>
      <permission permission_group_id="forum" permission_id="sidane_tm_delete" permission_type="flag" default_value="unset" interface_group_id="forumPermissions" display_order="1250"/>
      <permission permission_group_id="forum" permission_id="sidane_tm_edit" permission_type="flag" default_value="unset" interface_group_id="forumPermissions" display_order="1240"/>
      <permission permission_group_id="forum" permission_id="sidane_tm_manage" permission_type="flag" default_value="unset" interface_group_id="forumModeratorPermissions" display_order="50000"/>
      <permission permission_group_id="forum" permission_id="sidane_tm_menu_limit" permission_type="integer" default_value_int="0" interface_group_id="forumPermissions" display_order="1220"/>
      <permission permission_group_id="forum" permission_id="sidane_tm_view" permission_type="flag" default_value="unset" interface_group_id="forumPermissions" display_order="1210"/>
    </permissions>
    <interface_groups/>
  </permissions>
  <phrases>
    <phrase title="add_threadmark" version_id="1" version_string="1.0"><![CDATA[Add Threadmark]]></phrase>
    <phrase title="admin_navigation_sidane_tm_categories" version_id="1040000" version_string="1.4.0"><![CDATA[Threadmark Categories]]></phrase>
    <phrase title="admin_permission_sidane_threadmarks" version_id="1040000" version_string="1.4.0"><![CDATA[Manage threadmarks]]></phrase>
    <phrase title="click_to_lock" version_id="1020100" version_string="1.2.1"><![CDATA[Click to lock]]></phrase>
    <phrase title="click_to_unlock" version_id="12" version_string="1.1.9"><![CDATA[Click to unlock]]></phrase>
    <phrase title="delete_threadmark" version_id="1" version_string="1.0"><![CDATA[Delete this threadmark]]></phrase>
    <phrase title="edit_threadmark" version_id="1" version_string="1.0"><![CDATA[Edit Threadmark]]></phrase>
    <phrase title="moderator_log_post_create_threadmark" version_id="3" version_string="1.1"><![CDATA[Threadmark '{label}' created]]></phrase>
    <phrase title="moderator_log_post_delete_threadmark" version_id="3" version_string="1.1"><![CDATA[Threadmark '{label}' deleted]]></phrase>
    <phrase title="moderator_log_post_update_threadmark" version_id="3" version_string="1.1"><![CDATA[Threadmark changed from '{old_label}' to '{new_label}']]></phrase>
    <phrase title="most_recent_threadmarks" version_id="1" version_string="1.0"><![CDATA[Most recent threadmarks]]></phrase>
    <phrase title="option_group_sidaneThreadmarks" version_id="1" version_string="1.0"><![CDATA[Threadmarks]]></phrase>
    <phrase title="option_group_sidaneThreadmarks_description" version_id="1" version_string="1.0"><![CDATA[]]></phrase>
    <phrase title="option_sidaneThreadmarksHideMenuFromGuests" version_id="1" version_string="1.0"><![CDATA[Hide threadmarks drop down menu from guests]]></phrase>
    <phrase title="option_sidaneThreadmarksHideMenuFromGuests_explain" version_id="1" version_string="1.0"><![CDATA[If enabled, guests will have to click the threadmarks link to see the list of threadmarks.]]></phrase>
    <phrase title="option_sidaneThreadmarksNavLinks" version_id="1" version_string="1.0"><![CDATA[Threadmark Nav links]]></phrase>
    <phrase title="option_sidaneThreadmarksNavLinks_explain" version_id="1" version_string="1.0"><![CDATA[If enabled, automatically generate index/next/previous threadmark links.]]></phrase>
    <phrase title="permission_forum_sidane_tm_add" version_id="2" version_string="1.0"><![CDATA[Add Threadmarks to Own Thread]]></phrase>
    <phrase title="permission_forum_sidane_tm_delete" version_id="2" version_string="1.0"><![CDATA[Delete Threadmarks in Own Thread]]></phrase>
    <phrase title="permission_forum_sidane_tm_edit" version_id="2" version_string="1.0"><![CDATA[Edit Threadmarks in Own Thread]]></phrase>
    <phrase title="permission_forum_sidane_tm_manage" version_id="2" version_string="1.0"><![CDATA[Manage threadmarks]]></phrase>
    <phrase title="permission_forum_sidane_tm_menu_limit" version_id="2" version_string="1.0"><![CDATA[Max Threadmarks In Menu]]></phrase>
    <phrase title="permission_forum_sidane_tm_view" version_id="2" version_string="1.0"><![CDATA[View Threadmarks]]></phrase>
    <phrase title="please_enter_label_for_threadmark" version_id="1" version_string="1.0"><![CDATA[Please enter label for Threadmark]]></phrase>
    <phrase title="rebuild_threadmarks" version_id="1030000" version_string="1.3.0"><![CDATA[Rebuild Threadmark Summary Information]]></phrase>
    <phrase title="select_this_threadmark" version_id="9" version_string="1.1.6"><![CDATA[Select this threadmark]]></phrase>
    <phrase title="select_this_threadmark_by_x" version_id="9" version_string="1.1.6"><![CDATA[Select this threadmark by {name}]]></phrase>
    <phrase title="sidane_allowed_user_groups" version_id="1040000" version_string="1.4.0"><![CDATA[Allowed User Groups]]></phrase>
    <phrase title="sidane_confirm_delete_threadmark_category_footnote" version_id="1040000" version_string="1.4.0"><![CDATA[Any threadmarks belonging to this category will also be deleted.]]></phrase>
    <phrase title="sidane_confirm_deletion_of_threadmark_category" version_id="1040000" version_string="1.4.0"><![CDATA[Confirm Deletion of Threadmark Category]]></phrase>
    <phrase title="sidane_create_new_threadmark_category" version_id="1040000" version_string="1.4.0"><![CDATA[Create New Threadmark Category]]></phrase>
    <phrase title="sidane_delete_threadmark_category" version_id="1040000" version_string="1.4.0"><![CDATA[Delete Threadmark Category]]></phrase>
    <phrase title="sidane_edit_display_order" version_id="1040006" version_string="1.4.0"><![CDATA[Edit Display Order]]></phrase>
    <phrase title="sidane_edit_threadmark_category" version_id="1040000" version_string="1.4.0"><![CDATA[Edit Threadmark Category]]></phrase>
    <phrase title="sidane_please_confirm_that_you_want_to_delete_following_threadmark_category" version_id="1040000" version_string="1.4.0"><![CDATA[Please confirm that you want to delete the following threadmark category]]></phrase>
    <phrase title="sidane_please_enter_valid_threadmark_category_id" version_id="1040000" version_string="1.4.0"><![CDATA[Please enter a valid threadmark category ID.]]></phrase>
    <phrase title="sidane_requested_threadmark_category_not_found" version_id="1040000" version_string="1.4.0"><![CDATA[The requested threadmark categorycould not be found.]]></phrase>
    <phrase title="sidane_save_display_order" version_id="1040006" version_string="1.4.0"><![CDATA[Save Display Order]]></phrase>
    <phrase title="sidane_save_threadmark_category" version_id="1040000" version_string="1.4.0"><![CDATA[Save Threadmark Category]]></phrase>
    <phrase title="sidane_threadmarks_cache" version_id="2" version_string="2.0"><![CDATA[Threadmark cache]]></phrase>
    <phrase title="sidane_threadmark_categories" version_id="1040000" version_string="1.4.0"><![CDATA[Threadmark Categories]]></phrase>
    <phrase title="sidane_threadmark_category" version_id="1040000" version_string="1.4.0"><![CDATA[Threadmark Category]]></phrase>
    <phrase title="style_property_group_Threadmarks_master" version_id="17" version_string="1.1.11b"><![CDATA[Threadmarks]]></phrase>
    <phrase title="style_property_group_Threadmarks_master_desc" version_id="17" version_string="1.1.11b"><![CDATA[Threadmarks and Threadmark Byproducts]]></phrase>
    <phrase title="style_property_messageNewIndicatorInnerThreadmarks_description_master" version_id="17" version_string="1.1.11b"><![CDATA[?????]]></phrase>
    <phrase title="style_property_messageNewIndicatorInnerThreadmarks_master" version_id="17" version_string="1.1.11b"><![CDATA[Message New Indicator Inner Threadmarks]]></phrase>
    <phrase title="style_property_messageNewIndicatorThreadmarks_description_master" version_id="17" version_string="1.1.11b"><![CDATA[not sure]]></phrase>
    <phrase title="style_property_messageNewIndicatorThreadmarks_master" version_id="17" version_string="1.1.11b"><![CDATA[Message New Indicator]]></phrase>
    <phrase title="style_property_ThreadmarkButtonHover_description_master" version_id="17" version_string="1.1.11b"><![CDATA[What happens when you mouse over]]></phrase>
    <phrase title="style_property_ThreadmarkButtonHover_master" version_id="17" version_string="1.1.11b"><![CDATA[Threadmark Button Hover]]></phrase>
    <phrase title="style_property_ThreadmarkButtons_description_master" version_id="17" version_string="1.1.11b"><![CDATA[Everything you can click.]]></phrase>
    <phrase title="style_property_ThreadmarkButtons_master" version_id="17" version_string="1.1.11b"><![CDATA[Threadmark Buttons]]></phrase>
    <phrase title="style_property_Threadmarker_description_master" version_id="17" version_string="1.1.11b"><![CDATA[The space above the Threadmarked post.]]></phrase>
    <phrase title="style_property_Threadmarker_master" version_id="17" version_string="1.1.11b"><![CDATA[Threadmarker]]></phrase>
    <phrase title="style_property_ThreadmarkHistory_description_master" version_id="17" version_string="1.1.11b"><![CDATA[The history button]]></phrase>
    <phrase title="style_property_ThreadmarkHistory_master" version_id="17" version_string="1.1.11b"><![CDATA[Threadmark History]]></phrase>
    <phrase title="style_property_ThreadmarkIndexButtons_description_master" version_id="17" version_string="1.1.11b"><![CDATA[The << Index >> button styling]]></phrase>
    <phrase title="style_property_ThreadmarkIndexButtons_master" version_id="17" version_string="1.1.11b"><![CDATA[Threadmark Index Buttons]]></phrase>
    <phrase title="style_property_ThreadmarkJSTree_description_master" version_id="17" version_string="1.1.11b"><![CDATA[I think it's related to the sortable bits?]]></phrase>
    <phrase title="style_property_ThreadmarkJSTree_master" version_id="17" version_string="1.1.11b"><![CDATA[Threadmark JS Tree]]></phrase>
    <phrase title="style_property_ThreadmarkLabelStrong_description_master" version_id="17" version_string="1.1.11b"><![CDATA[The 'Threadmark' thing before the label]]></phrase>
    <phrase title="style_property_ThreadmarkLabelStrong_master" version_id="17" version_string="1.1.11b"><![CDATA[Threadmark Label Strong]]></phrase>
    <phrase title="style_property_ThreadmarkLabel_description_master" version_id="17" version_string="1.1.11b"><![CDATA[Styling of what you name the threadmark]]></phrase>
    <phrase title="style_property_ThreadmarkLabel_master" version_id="17" version_string="1.1.11b"><![CDATA[Threadmark Label]]></phrase>
    <phrase title="style_property_ThreadmarkSortable_description_master" version_id="17" version_string="1.1.11b"><![CDATA[The things you can move around when you're reorganizing your threadmarks]]></phrase>
    <phrase title="style_property_ThreadmarkSortable_master" version_id="17" version_string="1.1.11b"><![CDATA[Threadmark Sortable]]></phrase>
    <phrase title="threadmark" global_cache="1" version_id="1" version_string="1.0"><![CDATA[Threadmark]]></phrase>
    <phrase title="threadmarks" version_id="1" version_string="1.0"><![CDATA[Threadmarks]]></phrase>
    <phrase title="threadmarks_for" version_id="1" version_string="1.0"><![CDATA[Threadmarks for]]></phrase>
    <phrase title="threadmark_after_this_post" version_id="1040006" version_string="1.4.0"><![CDATA[After this post]]></phrase>
    <phrase title="threadmark_created" version_id="1" version_string="1.0"><![CDATA[Threadmark created]]></phrase>
    <phrase title="threadmark_created_by_x_on_y" version_id="9" version_string="1.1.6"><![CDATA[Threadmark created by {name} on {date}]]></phrase>
    <phrase title="threadmark_deleted" version_id="1" version_string="1.0"><![CDATA[Threadmark deleted]]></phrase>
    <phrase title="threadmark_end_of_index" version_id="1040004" version_string="1.4.0 rc4"><![CDATA[This threadmark is at the end of the threadmark index]]></phrase>
    <phrase title="threadmark_history" version_id="9" version_string="1.1.6"><![CDATA[History]]></phrase>
    <phrase title="threadmark_index" version_id="9" version_string="1.1.6"><![CDATA[Index]]></phrase>
    <phrase title="threadmark_insert_before_existing" version_id="1040004" version_string="1.4.0 rc4"><![CDATA[Insert before existing threadmarks]]></phrase>
    <phrase title="threadmark_label" version_id="1040000" version_string="1.4.0"><![CDATA[Threadmark Label]]></phrase>
    <phrase title="threadmark_next" version_id="9" version_string="1.1.6"><![CDATA[&gt;&gt;]]></phrase>
    <phrase title="threadmark_position_after" version_id="1040004" version_string="1.4.0 rc4"><![CDATA[Add threadmark after]]></phrase>
    <phrase title="threadmark_previous" version_id="9" version_string="1.1.6"><![CDATA[&lt;&lt;]]></phrase>
    <phrase title="threadmark_reset_nesting" version_id="1040006" version_string="1.4.0"><![CDATA[Reset Nesting]]></phrase>
    <phrase title="threadmark_updated" version_id="1" version_string="1.0"><![CDATA[Threadmark updated]]></phrase>
    <phrase title="update_threadmark" version_id="1" version_string="1.0"><![CDATA[Update Threadmark]]></phrase>
    <phrase title="view_all_threadmarks" version_id="1" version_string="1.0"><![CDATA[View all {count} threadmarks]]></phrase>
    <phrase title="x_created_threadmark_in_thread_z" version_id="9" version_string="1.1.6"><![CDATA[{name} created the threadmark {threadmark} in thread {title}]]></phrase>
    <phrase title="x_created_threadmark_on_ys_post_in_thread_z" version_id="9" version_string="1.1.6"><![CDATA[{name} created the threadmark {threadmark} on {poster}'s post in thread {title}]]></phrase>
    <phrase title="you_do_not_have_permission_to_add_threadmarks" version_id="2" version_string="1.0"><![CDATA[You do not have permission to add threadmarks.]]></phrase>
    <phrase title="you_do_not_have_permission_to_delete_threadmark" version_id="1040006" version_string="1.4.0"><![CDATA[You do not have permission to delete this threadmark.]]></phrase>
    <phrase title="you_do_not_have_permission_to_edit_threadmark" version_id="1040006" version_string="1.4.0"><![CDATA[You do not have permission to edit this threadmark.]]></phrase>
  </phrases>
  <route_prefixes>
    <route_type type="admin">
      <prefix original_prefix="threadmark-categories" class="Sidane_Threadmarks_Route_PrefixAdmin_ThreadmarkCategories" build_link="data_only"/>
    </route_type>
  </route_prefixes>
  <style_properties>
    <property property_name="Threadmarker" property_type="css" definition="1" group_name="Threadmarks" title="Threadmarker" description="The space above the Threadmarked post." css_components="background,border,layout" scalar_type="" scalar_parameters="" display_order="1" sub_group=""><![CDATA[{"border-bottom-color":"@primaryLighterStill","border-bottom-style":"solid","border-bottom-width":"1px","margin-bottom":"10px","margin-left":"0","margin-right":"0","margin-top":"0"}]]></property>
    <property property_name="ThreadmarkLabel" property_type="css" definition="1" group_name="Threadmarks" title="Threadmark Label" description="Styling of what you name the threadmark" css_components="text,background,border,layout,extra" scalar_type="" scalar_parameters="" display_order="2" sub_group=""><![CDATA[{"background-color":"@primaryLighterStill","border-top-left-radius":"4px","border-top-right-radius":"4px","color":"@contentText","font-size":"12px","padding-bottom":"2px","padding-left":"6px","padding-right":"8px","padding-top":"3px"}]]></property>
    <property property_name="ThreadmarkLabelStrong" property_type="css" definition="1" group_name="Threadmarks" title="Threadmark Label Strong" description="The 'Threadmark' thing before the label" css_components="text" scalar_type="" scalar_parameters="" display_order="3" sub_group=""><![CDATA[{"color":"@secondaryMedium","font-weight":"bold"}]]></property>
    <property property_name="ThreadmarkButtons" property_type="css" definition="1" group_name="Threadmarks" title="Threadmark Buttons" description="Everything you can click." css_components="text,background,border,layout,extra" scalar_type="" scalar_parameters="" display_order="4" sub_group=""><![CDATA[{"background-color":"@primaryLighterStill","border-top-left-radius":"4px","border-top-right-radius":"4px","color":"@primaryMedium","font-size":"12px","text-decoration":{"none":"none"}}]]></property>
    <property property_name="ThreadmarkHistory" property_type="css" definition="1" group_name="Threadmarks" title="Threadmark History" description="The history button" css_components="layout,extra" scalar_type="" scalar_parameters="" display_order="5" sub_group=""><![CDATA[{"extra":"display: inline-flex ;","margin-bottom":"0","margin-left":"4px","margin-right":"0","margin-top":"0","padding-bottom":"2px","padding-left":"6px","padding-right":"8px","padding-top":"3px"}]]></property>
    <property property_name="ThreadmarkIndexButtons" property_type="css" definition="1" group_name="Threadmarks" title="Threadmark Index Buttons" description="The &lt;&lt; Index &gt;&gt; button styling" css_components="border,layout,extra" scalar_type="" scalar_parameters="" display_order="6" sub_group=""><![CDATA[{"border-bottom-left-radius":"4px","border-bottom-right-radius":"4px","extra":"display: inline-block;","margin-all":"0","padding-bottom":"2px","padding-left":"6px","padding-right":"8px","padding-top":"3px"}]]></property>
    <property property_name="ThreadmarkButtonHover" property_type="css" definition="1" group_name="Threadmarks" title="Threadmark Button Hover" description="What happens when you mouse over" css_components="text,background,border,layout,extra" scalar_type="" scalar_parameters="" display_order="7" sub_group=""><![CDATA[{"background-color":"@secondaryLighter","border-color":"@secondaryLight","color":"@secondaryDark","text-decoration":{"none":"none"}}]]></property>
    <property property_name="ThreadmarkSortable" property_type="css" definition="1" group_name="Threadmarks" title="Threadmark Sortable" description="The things you can move around when you're reorganizing your threadmarks" css_components="text,background,border,layout,extra" scalar_type="" scalar_parameters="" display_order="8" sub_group=""><![CDATA[{"background-color":"@contentBackground"}]]></property>
    <property property_name="ThreadmarkJSTree" property_type="css" definition="1" group_name="Threadmarks" title="Threadmark JS Tree" description="I think it's related to the sortable bits?" css_components="text,background,border,layout,extra" scalar_type="" scalar_parameters="" display_order="9" sub_group=""><![CDATA[{"color":"@primaryMedium"}]]></property>
    <property property_name="messageNewIndicatorThreadmarks" property_type="css" definition="1" group_name="Threadmarks" title="Message New Indicator" description="not sure" css_components="text,background,border,layout,extra" scalar_type="" scalar_parameters="" display_order="10" sub_group=""><![CDATA[{"background-color":"@primaryLight","background-image":"@imagePath\/xenforo\/gradients\/form-button-white-25px.png","background-position":"top","background-repeat":"repeat-x","border-color":"@primaryLight","border-radius":"3px","border-style":"solid","border-top-right-radius":"3px","border-width":"1px","color":"@primaryMedium","extra":"display: block;\nfloat: right;\nposition: relative;\nbox-shadow: 1px 1px 3px rgba(0,0,0, 0.25);\nbox-shadow: 1px 1px 1px rgba(0,0,0, 0.25);","font-size":"11px","margin-bottom":"5px","margin-left":"5px","margin-right":"0px","margin-top":"0px","padding-bottom":"1px","padding-left":"5px","padding-right":"5px","padding-top":"1px"}]]></property>
    <property property_name="messageNewIndicatorInnerThreadmarks" property_type="css" definition="1" group_name="Threadmarks" title="Message New Indicator Inner Threadmarks" description="?????" css_components="text,background,border,layout,extra" scalar_type="" scalar_parameters="" display_order="11" sub_group=""><![CDATA[{"background-color":"@primaryLight","border-top-right-radius":"0px","extra":"position: absolute;\ntop: -4px;\nright: -1px;","height":"4px","width":"5px"}]]></property>
    <group group_name="Threadmarks" display_order="3">
      <title>Threadmarks</title>
      <description>Threadmarks and Threadmark Byproducts</description>
    </group>
  </style_properties>
  <templates>
    <template title="edit_threadmark" version_id="1040006" version_string="1.4.0"><![CDATA[<xen:title>{xen:helper threadPrefix, $thread, escaped}{$thread.title} - {xen:phrase edit_threadmark}</xen:title>
<xen:h1>{xen:phrase edit_threadmark}</xen:h1>

<xen:navigation>
	<xen:breadcrumb source="$nodeBreadCrumbs" />
	<xen:breadcrumb href="{xen:link full:posts, $post}">{xen:helper threadPrefix, $thread}{$thread.title}</xen:breadcrumb>
</xen:navigation>

<xen:container var="$bodyClasses">{xen:helper nodeClasses, $nodeBreadCrumbs, $forum}</xen:container>
<xen:container var="$searchBar.thread"><xen:include template="search_bar_thread_only" /></xen:container>
<xen:container var="$searchBar.forum"><xen:include template="search_bar_forum_only" /></xen:container>

<form action="{xen:link 'posts/threadmark', $post}" method="post" class="xenForm formOverlay AutoValidator" data-redirect="on">
	<dl class="ctrlUnit">
		<dt><label for="ctrl_message">{xen:phrase threadmark_label}:</label></dt>
		<dd><input type="text" name="label" id="ctrl_message" class="textCtrl" value="{$threadmark.label}" maxlength="255" <xen:if is="!{$post.canEditThreadmarks}">readonly</xen:if> /></dd>
	</dl>

	<dl class="ctrlUnit">
		<dt><label for="ctrl_threadmark_category_id">{xen:phrase sidane_threadmark_category}:</label></dt>
		<dd>
			<select name="threadmark_category_id" class="textCtrl OptOut" id="ctrl_threadmark_category_id">
				<xen:foreach loop="$threadmarkCategoryOptions" key="$threadmarkCategoryId" value="$threadmarkCategoryOption">
					<option value="{$threadmarkCategoryId}" {xen:selected '{$threadmarkCategoryId} == {$threadmark.threadmark_category_id}'}>{$threadmarkCategoryOption}</option>
				</xen:foreach>
			</select>
		</dd>
	</dl>

	<xen:if is="{$post.canDeleteThreadmarks}">
		<dl class="ctrlUnit">
			<dt></dt>
			<dd>
				<label><input type="checkbox" name="_xfConfirm" value="1" /> {xen:phrase delete_threadmark}</label>
			</dd>
		</dl>
	</xen:if>

	<dl class="ctrlUnit submitUnit">
		<dt></dt>
		<dd><input type="submit" value="{xen:phrase update_threadmark}" accesskey="s" class="button primary" /></dd>
	</dl>

	<input type="hidden" name="_xfToken" value="{$visitor.csrf_token_page}" />
</form>]]></template>
    <template title="jstree.css" version_id="1040006" version_string="1.4.0"><![CDATA[/* jsTree default theme */
.jstree-node,
.jstree-children,
.jstree-container-ul {
  display: block;
  margin: 0;
  padding: 0;
  list-style-type: none;
  list-style-image: none;
}
.jstree-node {
  white-space: nowrap;
}
.jstree-anchor {
  display: inline-block;
  color: black;
  white-space: nowrap;
  padding: 0 4px 0 1px;
  margin: 0;
  vertical-align: top;
}
.jstree-anchor:focus {
  outline: 0;
}
.jstree-anchor,
.jstree-anchor:link,
.jstree-anchor:visited,
.jstree-anchor:hover,
.jstree-anchor:active {
  text-decoration: none;
  color: inherit;
}
.jstree-icon {
  display: inline-block;
  text-decoration: none;
  margin: 0;
  padding: 0;
  vertical-align: top;
  text-align: center;
}
.jstree-icon:empty {
  display: inline-block;
  text-decoration: none;
  margin: 0;
  padding: 0;
  vertical-align: top;
  text-align: center;
}
.jstree-ocl {
  cursor: pointer;
}
.jstree-leaf > .jstree-ocl {
  cursor: default;
}
.jstree .jstree-open > .jstree-children {
  display: block;
}
.jstree .jstree-closed > .jstree-children,
.jstree .jstree-leaf > .jstree-children {
  display: none;
}
.jstree-anchor > .jstree-themeicon {
  margin-right: 2px;
}
.jstree-no-icons .jstree-themeicon,
.jstree-anchor > .jstree-themeicon-hidden {
  display: none;
}
.jstree-hidden,
.jstree-node.jstree-hidden {
  display: none;
}
.jstree-rtl .jstree-anchor {
  padding: 0 1px 0 4px;
}
.jstree-rtl .jstree-anchor > .jstree-themeicon {
  margin-left: 2px;
  margin-right: 0;
}
.jstree-rtl .jstree-node {
  margin-left: 0;
}
.jstree-rtl .jstree-container-ul > .jstree-node {
  margin-right: 0;
}
.jstree-wholerow-ul {
  position: relative;
  display: inline-block;
  min-width: 100%;
}
.jstree-wholerow-ul .jstree-leaf > .jstree-ocl {
  cursor: pointer;
}
.jstree-wholerow-ul .jstree-anchor,
.jstree-wholerow-ul .jstree-icon {
  position: relative;
}
.jstree-wholerow-ul .jstree-wholerow {
  width: 100%;
  cursor: pointer;
  position: absolute;
  left: 0;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
.jstree-contextmenu .jstree-anchor {
  -webkit-user-select: none;
  /* disable selection/Copy of UIWebView */
  -webkit-touch-callout: none;
  /* disable the IOS popup when long-press on a link */
}
.vakata-context {
  display: none;
}
.vakata-context,
.vakata-context ul {
  margin: 0;
  padding: 2px;
  position: absolute;
  background: #f5f5f5;
  border: 1px solid #979797;
  box-shadow: 2px 2px 2px #999999;
}
.vakata-context ul {
  list-style: none;
  left: 100%;
  margin-top: -2.7em;
  margin-left: -4px;
}
.vakata-context .vakata-context-right ul {
  left: auto;
  right: 100%;
  margin-left: auto;
  margin-right: -4px;
}
.vakata-context li {
  list-style: none;
}
.vakata-context li > a {
  display: block;
  padding: 0 2em 0 2em;
  text-decoration: none;
  width: auto;
  color: black;
  white-space: nowrap;
  line-height: 2.4em;
  text-shadow: 1px 1px 0 white;
  border-radius: 1px;
}
.vakata-context li > a:hover {
  position: relative;
  background-color: #e8eff7;
  box-shadow: 0 0 2px #0a6aa1;
}
.vakata-context li > a.vakata-context-parent {
  background-image: url("data:image/gif;base64,R0lGODlhCwAHAIAAACgoKP///yH5BAEAAAEALAAAAAALAAcAAAIORI4JlrqN1oMSnmmZDQUAOw==");
  background-position: right center;
  background-repeat: no-repeat;
}
.vakata-context li > a:focus {
  outline: 0;
}
.vakata-context .vakata-context-hover > a {
  position: relative;
  background-color: #e8eff7;
  box-shadow: 0 0 2px #0a6aa1;
}
.vakata-context .vakata-context-separator > a,
.vakata-context .vakata-context-separator > a:hover {
  background: white;
  border: 0;
  border-top: 1px solid #e2e3e3;
  height: 1px;
  min-height: 1px;
  max-height: 1px;
  padding: 0;
  margin: 0 0 0 2.4em;
  border-left: 1px solid #e0e0e0;
  text-shadow: 0 0 0 transparent;
  box-shadow: 0 0 0 transparent;
  border-radius: 0;
}
.vakata-context .vakata-contextmenu-disabled a,
.vakata-context .vakata-contextmenu-disabled a:hover {
  color: silver;
  background-color: transparent;
  border: 0;
  box-shadow: 0 0 0;
}
.vakata-context li > a > i {
  text-decoration: none;
  display: inline-block;
  width: 2.4em;
  height: 2.4em;
  background: transparent;
  margin: 0 0 0 -2em;
  vertical-align: top;
  text-align: center;
  line-height: 2.4em;
}
.vakata-context li > a > i:empty {
  width: 2.4em;
  line-height: 2.4em;
}
.vakata-context li > a .vakata-contextmenu-sep {
  display: inline-block;
  width: 1px;
  height: 2.4em;
  background: white;
  margin: 0 0.5em 0 0;
  border-left: 1px solid #e2e3e3;
}
.vakata-context .vakata-contextmenu-shortcut {
  font-size: 0.8em;
  color: silver;
  opacity: 0.5;
  display: none;
}
.vakata-context-rtl ul {
  left: auto;
  right: 100%;
  margin-left: auto;
  margin-right: -4px;
}
.vakata-context-rtl li > a.vakata-context-parent {
  background-image: url("data:image/gif;base64,R0lGODlhCwAHAIAAACgoKP///yH5BAEAAAEALAAAAAALAAcAAAINjI+AC7rWHIsPtmoxLAA7");
  background-position: left center;
  background-repeat: no-repeat;
}
.vakata-context-rtl .vakata-context-separator > a {
  margin: 0 2.4em 0 0;
  border-left: 0;
  border-right: 1px solid #e2e3e3;
}
.vakata-context-rtl .vakata-context-left ul {
  right: auto;
  left: 100%;
  margin-left: -4px;
  margin-right: auto;
}
.vakata-context-rtl li > a > i {
  margin: 0 -2em 0 0;
}
.vakata-context-rtl li > a .vakata-contextmenu-sep {
  margin: 0 0 0 0.5em;
  border-left-color: white;
  background: #e2e3e3;
}
#jstree-marker {
  position: absolute;
  top: 0;
  left: 0;
  margin: -5px 0 0 0;
  padding: 0;
  border-right: 0;
  border-top: 5px solid transparent;
  border-bottom: 5px solid transparent;
  border-left: 5px solid;
  width: 0;
  height: 0;
  font-size: 0;
  line-height: 0;
}
#jstree-dnd {
  line-height: 16px;
  margin: 0;
  padding: 4px;
}
#jstree-dnd .jstree-icon,
#jstree-dnd .jstree-copy {
  display: inline-block;
  text-decoration: none;
  margin: 0 2px 0 0;
  padding: 0;
  width: 16px;
  height: 16px;
}
#jstree-dnd .jstree-ok {
  background: green;
}
#jstree-dnd .jstree-er {
  background: red;
}
#jstree-dnd .jstree-copy {
  margin: 0 2px 0 2px;
}
.jstree-default .jstree-node,
.jstree-default .jstree-icon {
  background-repeat: no-repeat;
  background-color: transparent;
}
.jstree-default .jstree-anchor,
.jstree-default .jstree-animated,
.jstree-default .jstree-wholerow {
  transition: background-color 0.15s, box-shadow 0.15s;
}
.jstree-default .jstree-hovered {
  background: #e7f4f9;
  border-radius: 2px;
  box-shadow: inset 0 0 1px #cccccc;
}
.jstree-default .jstree-context {
  background: #e7f4f9;
  border-radius: 2px;
  box-shadow: inset 0 0 1px #cccccc;
}
.jstree-default .jstree-clicked {
  background: #beebff;
  border-radius: 2px;
  box-shadow: inset 0 0 1px #999999;
}
.jstree-default .jstree-no-icons .jstree-anchor > .jstree-themeicon {
  display: none;
}
.jstree-default .jstree-disabled {
  background: transparent;
  color: #666666;
}
.jstree-default .jstree-disabled.jstree-hovered {
  background: transparent;
  box-shadow: none;
}
.jstree-default .jstree-disabled.jstree-clicked {
  background: #efefef;
}
.jstree-default .jstree-disabled > .jstree-icon {
  opacity: 0.8;
  filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'jstree-grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#jstree-grayscale");
  /* Firefox 10+ */
  filter: gray;
  /* IE6-9 */
  -webkit-filter: grayscale(100%);
  /* Chrome 19+ & Safari 6+ */
}
.jstree-default .jstree-search {
  font-style: italic;
  color: #8b0000;
  font-weight: bold;
}
.jstree-default .jstree-no-checkboxes .jstree-checkbox {
  display: none !important;
}
.jstree-default.jstree-checkbox-no-clicked .jstree-clicked {
  background: transparent;
  box-shadow: none;
}
.jstree-default.jstree-checkbox-no-clicked .jstree-clicked.jstree-hovered {
  background: #e7f4f9;
}
.jstree-default.jstree-checkbox-no-clicked > .jstree-wholerow-ul .jstree-wholerow-clicked {
  background: transparent;
}
.jstree-default.jstree-checkbox-no-clicked > .jstree-wholerow-ul .jstree-wholerow-clicked.jstree-wholerow-hovered {
  background: #e7f4f9;
}
.jstree-default > .jstree-striped {
  min-width: 100%;
  display: inline-block;
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAkCAMAAAB/qqA+AAAABlBMVEUAAAAAAAClZ7nPAAAAAnRSTlMNAMM9s3UAAAAXSURBVHjajcEBAQAAAIKg/H/aCQZ70AUBjAATb6YPDgAAAABJRU5ErkJggg==") left top repeat;
}
.jstree-default > .jstree-wholerow-ul .jstree-hovered,
.jstree-default > .jstree-wholerow-ul .jstree-clicked {
  background: transparent;
  box-shadow: none;
  border-radius: 0;
}
.jstree-default .jstree-wholerow {
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}
.jstree-default .jstree-wholerow-hovered {
  background: #e7f4f9;
}
.jstree-default .jstree-wholerow-clicked {
  background: #beebff;
  background: -webkit-linear-gradient(top, #beebff 0%, #a8e4ff 100%);
  background: linear-gradient(to bottom, #beebff 0%, #a8e4ff 100%);
}
.jstree-default .jstree-node {
  min-height: 24px;
  line-height: 24px;
  margin-left: 24px;
  min-width: 24px;
}
.jstree-default .jstree-anchor {
  line-height: 24px;
  height: 24px;
}
.jstree-default .jstree-icon {
  width: 24px;
  height: 24px;
  line-height: 24px;
}
.jstree-default .jstree-icon:empty {
  width: 24px;
  height: 24px;
  line-height: 24px;
}
.jstree-default.jstree-rtl .jstree-node {
  margin-right: 24px;
}
.jstree-default .jstree-wholerow {
  height: 24px;
}
.jstree-default .jstree-node,
.jstree-default .jstree-icon {
  background-image: url("styles/jstree/default/32px.png");
}
.jstree-default .jstree-node {
  background-position: -292px -4px;
  background-repeat: repeat-y;
}
.jstree-default .jstree-last {
  background: transparent;
}
.jstree-default .jstree-open > .jstree-ocl {
  background-position: -132px -4px;
}
.jstree-default .jstree-closed > .jstree-ocl {
  background-position: -100px -4px;
}
.jstree-default .jstree-leaf > .jstree-ocl {
  background-position: -68px -4px;
}
.jstree-default .jstree-themeicon {
  background-position: -260px -4px;
}
.jstree-default > .jstree-no-dots .jstree-node,
.jstree-default > .jstree-no-dots .jstree-leaf > .jstree-ocl {
  background: transparent;
}
.jstree-default > .jstree-no-dots .jstree-open > .jstree-ocl {
  background-position: -36px -4px;
}
.jstree-default > .jstree-no-dots .jstree-closed > .jstree-ocl {
  background-position: -4px -4px;
}
.jstree-default .jstree-disabled {
  background: transparent;
}
.jstree-default .jstree-disabled.jstree-hovered {
  background: transparent;
}
.jstree-default .jstree-disabled.jstree-clicked {
  background: #efefef;
}
.jstree-default .jstree-checkbox {
  background-position: -164px -4px;
}
.jstree-default .jstree-checkbox:hover {
  background-position: -164px -36px;
}
.jstree-default.jstree-checkbox-selection .jstree-clicked > .jstree-checkbox,
.jstree-default .jstree-checked > .jstree-checkbox {
  background-position: -228px -4px;
}
.jstree-default.jstree-checkbox-selection .jstree-clicked > .jstree-checkbox:hover,
.jstree-default .jstree-checked > .jstree-checkbox:hover {
  background-position: -228px -36px;
}
.jstree-default .jstree-anchor > .jstree-undetermined {
  background-position: -196px -4px;
}
.jstree-default .jstree-anchor > .jstree-undetermined:hover {
  background-position: -196px -36px;
}
.jstree-default .jstree-checkbox-disabled {
  opacity: 0.8;
  filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'jstree-grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#jstree-grayscale");
  /* Firefox 10+ */
  filter: gray;
  /* IE6-9 */
  -webkit-filter: grayscale(100%);
  /* Chrome 19+ & Safari 6+ */
}
.jstree-default > .jstree-striped {
  background-size: auto 48px;
}
.jstree-default.jstree-rtl .jstree-node {
  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAACAQMAAAB49I5GAAAABlBMVEUAAAAdHRvEkCwcAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjAAMOBgAAGAAJMwQHdQAAAABJRU5ErkJggg==");
  background-position: 100% 1px;
  background-repeat: repeat-y;
}
.jstree-default.jstree-rtl .jstree-last {
  background: transparent;
}
.jstree-default.jstree-rtl .jstree-open > .jstree-ocl {
  background-position: -132px -36px;
}
.jstree-default.jstree-rtl .jstree-closed > .jstree-ocl {
  background-position: -100px -36px;
}
.jstree-default.jstree-rtl .jstree-leaf > .jstree-ocl {
  background-position: -68px -36px;
}
.jstree-default.jstree-rtl > .jstree-no-dots .jstree-node,
.jstree-default.jstree-rtl > .jstree-no-dots .jstree-leaf > .jstree-ocl {
  background: transparent;
}
.jstree-default.jstree-rtl > .jstree-no-dots .jstree-open > .jstree-ocl {
  background-position: -36px -36px;
}
.jstree-default.jstree-rtl > .jstree-no-dots .jstree-closed > .jstree-ocl {
  background-position: -4px -36px;
}
.jstree-default .jstree-themeicon-custom {
  background-color: transparent;
  background-image: none;
  background-position: 0 0;
}
.jstree-default > .jstree-container-ul .jstree-loading > .jstree-ocl {
  background: url("styles/jstree/default/throbber.gif") center center no-repeat;
}
.jstree-default .jstree-file {
  background: url("styles/jstree/default/32px.png") -100px -68px no-repeat;
}
.jstree-default .jstree-folder {
  background: url("styles/jstree/default/32px.png") -260px -4px no-repeat;
}
.jstree-default > .jstree-container-ul > .jstree-node {
  margin-left: 0;
  margin-right: 0;
}
#jstree-dnd.jstree-default {
  line-height: 24px;
  padding: 0 4px;
}
#jstree-dnd.jstree-default .jstree-ok,
#jstree-dnd.jstree-default .jstree-er {
  background-image: url("styles/jstree/default/32px.png");
  background-repeat: no-repeat;
  background-color: transparent;
}
#jstree-dnd.jstree-default i {
  background: transparent;
  width: 24px;
  height: 24px;
  line-height: 24px;
}
#jstree-dnd.jstree-default .jstree-ok {
  background-position: -4px -68px;
}
#jstree-dnd.jstree-default .jstree-er {
  background-position: -36px -68px;
}
.jstree-default .jstree-ellipsis {
  overflow: hidden;
}
.jstree-default .jstree-ellipsis .jstree-anchor {
  width: calc(100% - 29px);
  text-overflow: ellipsis;
  overflow: hidden;
}
.jstree-default .jstree-ellipsis.jstree-no-icons .jstree-anchor {
  width: calc(100% - 5px);
}
.jstree-default.jstree-rtl .jstree-node {
  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAACAQMAAAB49I5GAAAABlBMVEUAAAAdHRvEkCwcAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjAAMOBgAAGAAJMwQHdQAAAABJRU5ErkJggg==");
}
.jstree-default.jstree-rtl .jstree-last {
  background: transparent;
}
.jstree-default-small .jstree-node {
  min-height: 18px;
  line-height: 18px;
  margin-left: 18px;
  min-width: 18px;
}
.jstree-default-small .jstree-anchor {
  line-height: 18px;
  height: 18px;
}
.jstree-default-small .jstree-icon {
  width: 18px;
  height: 18px;
  line-height: 18px;
}
.jstree-default-small .jstree-icon:empty {
  width: 18px;
  height: 18px;
  line-height: 18px;
}
.jstree-default-small.jstree-rtl .jstree-node {
  margin-right: 18px;
}
.jstree-default-small .jstree-wholerow {
  height: 18px;
}
.jstree-default-small .jstree-node,
.jstree-default-small .jstree-icon {
  background-image: url("styles/jstree/default/32px.png");
}
.jstree-default-small .jstree-node {
  background-position: -295px -7px;
  background-repeat: repeat-y;
}
.jstree-default-small .jstree-last {
  background: transparent;
}
.jstree-default-small .jstree-open > .jstree-ocl {
  background-position: -135px -7px;
}
.jstree-default-small .jstree-closed > .jstree-ocl {
  background-position: -103px -7px;
}
.jstree-default-small .jstree-leaf > .jstree-ocl {
  background-position: -71px -7px;
}
.jstree-default-small .jstree-themeicon {
  background-position: -263px -7px;
}
.jstree-default-small > .jstree-no-dots .jstree-node,
.jstree-default-small > .jstree-no-dots .jstree-leaf > .jstree-ocl {
  background: transparent;
}
.jstree-default-small > .jstree-no-dots .jstree-open > .jstree-ocl {
  background-position: -39px -7px;
}
.jstree-default-small > .jstree-no-dots .jstree-closed > .jstree-ocl {
  background-position: -7px -7px;
}
.jstree-default-small .jstree-disabled {
  background: transparent;
}
.jstree-default-small .jstree-disabled.jstree-hovered {
  background: transparent;
}
.jstree-default-small .jstree-disabled.jstree-clicked {
  background: #efefef;
}
.jstree-default-small .jstree-checkbox {
  background-position: -167px -7px;
}
.jstree-default-small .jstree-checkbox:hover {
  background-position: -167px -39px;
}
.jstree-default-small.jstree-checkbox-selection .jstree-clicked > .jstree-checkbox,
.jstree-default-small .jstree-checked > .jstree-checkbox {
  background-position: -231px -7px;
}
.jstree-default-small.jstree-checkbox-selection .jstree-clicked > .jstree-checkbox:hover,
.jstree-default-small .jstree-checked > .jstree-checkbox:hover {
  background-position: -231px -39px;
}
.jstree-default-small .jstree-anchor > .jstree-undetermined {
  background-position: -199px -7px;
}
.jstree-default-small .jstree-anchor > .jstree-undetermined:hover {
  background-position: -199px -39px;
}
.jstree-default-small .jstree-checkbox-disabled {
  opacity: 0.8;
  filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'jstree-grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#jstree-grayscale");
  /* Firefox 10+ */
  filter: gray;
  /* IE6-9 */
  -webkit-filter: grayscale(100%);
  /* Chrome 19+ & Safari 6+ */
}
.jstree-default-small > .jstree-striped {
  background-size: auto 36px;
}
.jstree-default-small.jstree-rtl .jstree-node {
  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAACAQMAAAB49I5GAAAABlBMVEUAAAAdHRvEkCwcAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjAAMOBgAAGAAJMwQHdQAAAABJRU5ErkJggg==");
  background-position: 100% 1px;
  background-repeat: repeat-y;
}
.jstree-default-small.jstree-rtl .jstree-last {
  background: transparent;
}
.jstree-default-small.jstree-rtl .jstree-open > .jstree-ocl {
  background-position: -135px -39px;
}
.jstree-default-small.jstree-rtl .jstree-closed > .jstree-ocl {
  background-position: -103px -39px;
}
.jstree-default-small.jstree-rtl .jstree-leaf > .jstree-ocl {
  background-position: -71px -39px;
}
.jstree-default-small.jstree-rtl > .jstree-no-dots .jstree-node,
.jstree-default-small.jstree-rtl > .jstree-no-dots .jstree-leaf > .jstree-ocl {
  background: transparent;
}
.jstree-default-small.jstree-rtl > .jstree-no-dots .jstree-open > .jstree-ocl {
  background-position: -39px -39px;
}
.jstree-default-small.jstree-rtl > .jstree-no-dots .jstree-closed > .jstree-ocl {
  background-position: -7px -39px;
}
.jstree-default-small .jstree-themeicon-custom {
  background-color: transparent;
  background-image: none;
  background-position: 0 0;
}
.jstree-default-small > .jstree-container-ul .jstree-loading > .jstree-ocl {
  background: url("styles/jstree/default/throbber.gif") center center no-repeat;
}
.jstree-default-small .jstree-file {
  background: url("styles/jstree/default/32px.png") -103px -71px no-repeat;
}
.jstree-default-small .jstree-folder {
  background: url("styles/jstree/default/32px.png") -263px -7px no-repeat;
}
.jstree-default-small > .jstree-container-ul > .jstree-node {
  margin-left: 0;
  margin-right: 0;
}
#jstree-dnd.jstree-default-small {
  line-height: 18px;
  padding: 0 4px;
}
#jstree-dnd.jstree-default-small .jstree-ok,
#jstree-dnd.jstree-default-small .jstree-er {
  background-image: url("styles/jstree/default/32px.png");
  background-repeat: no-repeat;
  background-color: transparent;
}
#jstree-dnd.jstree-default-small i {
  background: transparent;
  width: 18px;
  height: 18px;
  line-height: 18px;
}
#jstree-dnd.jstree-default-small .jstree-ok {
  background-position: -7px -71px;
}
#jstree-dnd.jstree-default-small .jstree-er {
  background-position: -39px -71px;
}
.jstree-default-small .jstree-ellipsis {
  overflow: hidden;
}
.jstree-default-small .jstree-ellipsis .jstree-anchor {
  width: calc(100% - 23px);
  text-overflow: ellipsis;
  overflow: hidden;
}
.jstree-default-small .jstree-ellipsis.jstree-no-icons .jstree-anchor {
  width: calc(100% - 5px);
}
.jstree-default-small.jstree-rtl .jstree-node {
  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAACAQMAAABv1h6PAAAABlBMVEUAAAAdHRvEkCwcAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjAAMHBgAAiABBI4gz9AAAAABJRU5ErkJggg==");
}
.jstree-default-small.jstree-rtl .jstree-last {
  background: transparent;
}
.jstree-default-large .jstree-node {
  min-height: 32px;
  line-height: 32px;
  margin-left: 32px;
  min-width: 32px;
}
.jstree-default-large .jstree-anchor {
  line-height: 32px;
  height: 32px;
}
.jstree-default-large .jstree-icon {
  width: 32px;
  height: 32px;
  line-height: 32px;
}
.jstree-default-large .jstree-icon:empty {
  width: 32px;
  height: 32px;
  line-height: 32px;
}
.jstree-default-large.jstree-rtl .jstree-node {
  margin-right: 32px;
}
.jstree-default-large .jstree-wholerow {
  height: 32px;
}
.jstree-default-large .jstree-node,
.jstree-default-large .jstree-icon {
  background-image: url("styles/jstree/default/32px.png");
}
.jstree-default-large .jstree-node {
  background-position: -288px 0px;
  background-repeat: repeat-y;
}
.jstree-default-large .jstree-last {
  background: transparent;
}
.jstree-default-large .jstree-open > .jstree-ocl {
  background-position: -128px 0px;
}
.jstree-default-large .jstree-closed > .jstree-ocl {
  background-position: -96px 0px;
}
.jstree-default-large .jstree-leaf > .jstree-ocl {
  background-position: -64px 0px;
}
.jstree-default-large .jstree-themeicon {
  background-position: -256px 0px;
}
.jstree-default-large > .jstree-no-dots .jstree-node,
.jstree-default-large > .jstree-no-dots .jstree-leaf > .jstree-ocl {
  background: transparent;
}
.jstree-default-large > .jstree-no-dots .jstree-open > .jstree-ocl {
  background-position: -32px 0px;
}
.jstree-default-large > .jstree-no-dots .jstree-closed > .jstree-ocl {
  background-position: 0px 0px;
}
.jstree-default-large .jstree-disabled {
  background: transparent;
}
.jstree-default-large .jstree-disabled.jstree-hovered {
  background: transparent;
}
.jstree-default-large .jstree-disabled.jstree-clicked {
  background: #efefef;
}
.jstree-default-large .jstree-checkbox {
  background-position: -160px 0px;
}
.jstree-default-large .jstree-checkbox:hover {
  background-position: -160px -32px;
}
.jstree-default-large.jstree-checkbox-selection .jstree-clicked > .jstree-checkbox,
.jstree-default-large .jstree-checked > .jstree-checkbox {
  background-position: -224px 0px;
}
.jstree-default-large.jstree-checkbox-selection .jstree-clicked > .jstree-checkbox:hover,
.jstree-default-large .jstree-checked > .jstree-checkbox:hover {
  background-position: -224px -32px;
}
.jstree-default-large .jstree-anchor > .jstree-undetermined {
  background-position: -192px 0px;
}
.jstree-default-large .jstree-anchor > .jstree-undetermined:hover {
  background-position: -192px -32px;
}
.jstree-default-large .jstree-checkbox-disabled {
  opacity: 0.8;
  filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'jstree-grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#jstree-grayscale");
  /* Firefox 10+ */
  filter: gray;
  /* IE6-9 */
  -webkit-filter: grayscale(100%);
  /* Chrome 19+ & Safari 6+ */
}
.jstree-default-large > .jstree-striped {
  background-size: auto 64px;
}
.jstree-default-large.jstree-rtl .jstree-node {
  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAACAQMAAAB49I5GAAAABlBMVEUAAAAdHRvEkCwcAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjAAMOBgAAGAAJMwQHdQAAAABJRU5ErkJggg==");
  background-position: 100% 1px;
  background-repeat: repeat-y;
}
.jstree-default-large.jstree-rtl .jstree-last {
  background: transparent;
}
.jstree-default-large.jstree-rtl .jstree-open > .jstree-ocl {
  background-position: -128px -32px;
}
.jstree-default-large.jstree-rtl .jstree-closed > .jstree-ocl {
  background-position: -96px -32px;
}
.jstree-default-large.jstree-rtl .jstree-leaf > .jstree-ocl {
  background-position: -64px -32px;
}
.jstree-default-large.jstree-rtl > .jstree-no-dots .jstree-node,
.jstree-default-large.jstree-rtl > .jstree-no-dots .jstree-leaf > .jstree-ocl {
  background: transparent;
}
.jstree-default-large.jstree-rtl > .jstree-no-dots .jstree-open > .jstree-ocl {
  background-position: -32px -32px;
}
.jstree-default-large.jstree-rtl > .jstree-no-dots .jstree-closed > .jstree-ocl {
  background-position: 0px -32px;
}
.jstree-default-large .jstree-themeicon-custom {
  background-color: transparent;
  background-image: none;
  background-position: 0 0;
}
.jstree-default-large > .jstree-container-ul .jstree-loading > .jstree-ocl {
  background: url("styles/jstree/default/throbber.gif") center center no-repeat;
}
.jstree-default-large .jstree-file {
  background: url("styles/jstree/default/32px.png") -96px -64px no-repeat;
}
.jstree-default-large .jstree-folder {
  background: url("styles/jstree/default/32px.png") -256px 0px no-repeat;
}
.jstree-default-large > .jstree-container-ul > .jstree-node {
  margin-left: 0;
  margin-right: 0;
}
#jstree-dnd.jstree-default-large {
  line-height: 32px;
  padding: 0 4px;
}
#jstree-dnd.jstree-default-large .jstree-ok,
#jstree-dnd.jstree-default-large .jstree-er {
  background-image: url("styles/jstree/default/32px.png");
  background-repeat: no-repeat;
  background-color: transparent;
}
#jstree-dnd.jstree-default-large i {
  background: transparent;
  width: 32px;
  height: 32px;
  line-height: 32px;
}
#jstree-dnd.jstree-default-large .jstree-ok {
  background-position: 0px -64px;
}
#jstree-dnd.jstree-default-large .jstree-er {
  background-position: -32px -64px;
}
.jstree-default-large .jstree-ellipsis {
  overflow: hidden;
}
.jstree-default-large .jstree-ellipsis .jstree-anchor {
  width: calc(100% - 37px);
  text-overflow: ellipsis;
  overflow: hidden;
}
.jstree-default-large .jstree-ellipsis.jstree-no-icons .jstree-anchor {
  width: calc(100% - 5px);
}
.jstree-default-large.jstree-rtl .jstree-node {
  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAACAQMAAAAD0EyKAAAABlBMVEUAAAAdHRvEkCwcAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjgIIGBgABCgCBvVLXcAAAAABJRU5ErkJggg==");
}
.jstree-default-large.jstree-rtl .jstree-last {
  background: transparent;
}
@media (max-width: 768px) {
  #jstree-dnd.jstree-dnd-responsive {
    line-height: 40px;
    font-weight: bold;
    font-size: 1.1em;
    text-shadow: 1px 1px white;
  }
  #jstree-dnd.jstree-dnd-responsive > i {
    background: transparent;
    width: 40px;
    height: 40px;
  }
  #jstree-dnd.jstree-dnd-responsive > .jstree-ok {
    background-image: url("styles/jstree/default/40px.png");
    background-position: 0 -200px;
    background-size: 120px 240px;
  }
  #jstree-dnd.jstree-dnd-responsive > .jstree-er {
    background-image: url("styles/jstree/default/40px.png");
    background-position: -40px -200px;
    background-size: 120px 240px;
  }
  #jstree-marker.jstree-dnd-responsive {
    border-left-width: 10px;
    border-top-width: 10px;
    border-bottom-width: 10px;
    margin-top: -10px;
  }
}
@media (max-width: 768px) {
  .jstree-default-responsive {
    /*
	.jstree-open > .jstree-ocl,
	.jstree-closed > .jstree-ocl { border-radius:20px; background-color:white; }
	*/
  }
  .jstree-default-responsive .jstree-icon {
    background-image: url("styles/jstree/default/40px.png");
  }
  .jstree-default-responsive .jstree-node,
  .jstree-default-responsive .jstree-leaf > .jstree-ocl {
    background: transparent;
  }
  .jstree-default-responsive .jstree-node {
    min-height: 40px;
    line-height: 40px;
    margin-left: 40px;
    min-width: 40px;
    white-space: nowrap;
  }
  .jstree-default-responsive .jstree-anchor {
    line-height: 40px;
    height: 40px;
  }
  .jstree-default-responsive .jstree-icon,
  .jstree-default-responsive .jstree-icon:empty {
    width: 40px;
    height: 40px;
    line-height: 40px;
  }
  .jstree-default-responsive > .jstree-container-ul > .jstree-node {
    margin-left: 0;
  }
  .jstree-default-responsive.jstree-rtl .jstree-node {
    margin-left: 0;
    margin-right: 40px;
    background: transparent;
  }
  .jstree-default-responsive.jstree-rtl .jstree-container-ul > .jstree-node {
    margin-right: 0;
  }
  .jstree-default-responsive .jstree-ocl,
  .jstree-default-responsive .jstree-themeicon,
  .jstree-default-responsive .jstree-checkbox {
    background-size: 120px 240px;
  }
  .jstree-default-responsive .jstree-leaf > .jstree-ocl,
  .jstree-default-responsive.jstree-rtl .jstree-leaf > .jstree-ocl {
    background: transparent;
  }
  .jstree-default-responsive .jstree-open > .jstree-ocl {
    background-position: 0 0px !important;
  }
  .jstree-default-responsive .jstree-closed > .jstree-ocl {
    background-position: 0 -40px !important;
  }
  .jstree-default-responsive.jstree-rtl .jstree-closed > .jstree-ocl {
    background-position: -40px 0px !important;
  }
  .jstree-default-responsive .jstree-themeicon {
    background-position: -40px -40px;
  }
  .jstree-default-responsive .jstree-checkbox,
  .jstree-default-responsive .jstree-checkbox:hover {
    background-position: -40px -80px;
  }
  .jstree-default-responsive.jstree-checkbox-selection .jstree-clicked > .jstree-checkbox,
  .jstree-default-responsive.jstree-checkbox-selection .jstree-clicked > .jstree-checkbox:hover,
  .jstree-default-responsive .jstree-checked > .jstree-checkbox,
  .jstree-default-responsive .jstree-checked > .jstree-checkbox:hover {
    background-position: 0 -80px;
  }
  .jstree-default-responsive .jstree-anchor > .jstree-undetermined,
  .jstree-default-responsive .jstree-anchor > .jstree-undetermined:hover {
    background-position: 0 -120px;
  }
  .jstree-default-responsive .jstree-anchor {
    font-weight: bold;
    font-size: 1.1em;
    text-shadow: 1px 1px white;
  }
  .jstree-default-responsive > .jstree-striped {
    background: transparent;
  }
  .jstree-default-responsive .jstree-wholerow {
    border-top: 1px solid rgba(255, 255, 255, 0.7);
    border-bottom: 1px solid rgba(64, 64, 64, 0.2);
    background: #ebebeb;
    height: 40px;
  }
  .jstree-default-responsive .jstree-wholerow-hovered {
    background: #e7f4f9;
  }
  .jstree-default-responsive .jstree-wholerow-clicked {
    background: #beebff;
  }
  .jstree-default-responsive .jstree-children .jstree-last > .jstree-wholerow {
    box-shadow: inset 0 -6px 3px -5px #666666;
  }
  .jstree-default-responsive .jstree-children .jstree-open > .jstree-wholerow {
    box-shadow: inset 0 6px 3px -5px #666666;
    border-top: 0;
  }
  .jstree-default-responsive .jstree-children .jstree-open + .jstree-open {
    box-shadow: none;
  }
  .jstree-default-responsive .jstree-node,
  .jstree-default-responsive .jstree-icon,
  .jstree-default-responsive .jstree-node > .jstree-ocl,
  .jstree-default-responsive .jstree-themeicon,
  .jstree-default-responsive .jstree-checkbox {
    background-image: url("styles/jstree/default/40px.png");
    background-size: 120px 240px;
  }
  .jstree-default-responsive .jstree-node {
    background-position: -80px 0;
    background-repeat: repeat-y;
  }
  .jstree-default-responsive .jstree-last {
    background: transparent;
  }
  .jstree-default-responsive .jstree-leaf > .jstree-ocl {
    background-position: -40px -120px;
  }
  .jstree-default-responsive .jstree-last > .jstree-ocl {
    background-position: -40px -160px;
  }
  .jstree-default-responsive .jstree-themeicon-custom {
    background-color: transparent;
    background-image: none;
    background-position: 0 0;
  }
  .jstree-default-responsive .jstree-file {
    background: url("styles/jstree/default/40px.png") 0 -160px no-repeat;
    background-size: 120px 240px;
  }
  .jstree-default-responsive .jstree-folder {
    background: url("styles/jstree/default/40px.png") -40px -40px no-repeat;
    background-size: 120px 240px;
  }
  .jstree-default-responsive > .jstree-container-ul > .jstree-node {
    margin-left: 0;
    margin-right: 0;
  }
}]]></template>
    <template title="news_feed_item_threadmark_insert" version_id="10" version_string="1.1.7"><![CDATA[<h3 class="description">

	<xen:if is="{$content.user_id} == {$content.threadmark.user_id}">

		<xen:comment><!-- $user created a threadmark --></xen:comment>
		{xen:phrase x_created_threadmark_in_thread_z,
		    'threadmark=<a href="{xen:link full:posts, $content}">{$content.threadmark.label}</a>',
			'name={xen:if $content.threadmark.user_id, {xen:helper username, $content.threadmark, 'primaryText'}, '<span class="primaryText">{xen:phrase unknown_member}</span>'}',
		    'poster={xen:helper username, $content, 'primaryText'}',
			'title=<a href="{xen:link threads, $content}"{xen:if '{$content.hasPreview}', ' class="PreviewTooltip" data-previewUrl="{xen:link posts/threadmarkpreview, $content}"'}>{xen:helper threadPrefix, $content}{$content.title}</a>'}

	<xen:else />

		<xen:comment><!-- $user created a threadmark on $contentUser's post --></xen:comment>
		{xen:phrase x_created_threadmark_on_ys_post_in_thread_z,
            'threadmark=<a href="{xen:link full:posts, $content}">{$content.threadmark.label}</a>',
		    'name={xen:if $content.threadmark.user_id, {xen:helper username, $content.threadmark, 'primaryText'}, '<span class="primaryText">{xen:phrase unknown_member}</span>'}',
			'poster={xen:helper username, $content, 'primaryText'}',
			'title=<a href="{xen:link threads, $content}"{xen:if '{$content.hasPreview}', ' class="PreviewTooltip" data-previewUrl="{xen:link posts/threadmarkpreview, $content}"'}>{xen:helper threadPrefix, $content}{$content.title}</a>'}

	</xen:if>

</h3>

<p class="snippet">{xen:helper snippet, $content.message, $xenOptions.newsFeedMessageSnippetLength, {xen:array 'stripQuote=1'}}</p>

<xen:include template="news_feed_attached_images" />]]></template>
    <template title="new_threadmark" version_id="1040006" version_string="1.4.0"><![CDATA[<xen:title>{xen:helper threadPrefix, $thread, escaped}{$thread.title} - {xen:phrase add_threadmark}</xen:title>
<xen:h1>{xen:phrase add_threadmark}</xen:h1>

<xen:navigation>
	<xen:breadcrumb source="$nodeBreadCrumbs" />
	<xen:breadcrumb href="{xen:link full:posts, $post}">{xen:helper threadPrefix, $thread}{$thread.title}</xen:breadcrumb>
</xen:navigation>

<xen:container var="$bodyClasses">{xen:helper nodeClasses, $nodeBreadCrumbs, $forum}</xen:container>
<xen:container var="$searchBar.thread"><xen:include template="search_bar_thread_only" /></xen:container>
<xen:container var="$searchBar.forum"><xen:include template="search_bar_forum_only" /></xen:container>

<form action="{xen:link 'posts/threadmark', $post}" method="post" class="xenForm formOverlay AutoValidator" data-redirect="on">

	<dl class="ctrlUnit">
		<dt><label for="ctrl_label">{xen:phrase threadmark_label}:</label></dt>
		<dd><input type="text" name="label" id="ctrl_label" class="textCtrl" maxlength="255" /></dd>
	</dl>

	<dl class="ctrlUnit">
		<dt><label for="ctrl_threadmark_category_id">{xen:phrase sidane_threadmark_category}:</label></dt>
		<dd>
			<select name="threadmark_category_id" class="textCtrl OptOut" id="ctrl_threadmark_category_id">
				<xen:foreach loop="$threadmarkCategoryOptions" key="$threadmarkCategoryId" value="$threadmarkCategoryOption">
					<option value="{$threadmarkCategoryId}" {xen:selected '{$threadmarkCategoryId} == {$threadmark_category_id}'}>{$threadmarkCategoryOption}</option>
				</xen:foreach>
			</select>
		</dd>
	</dl>

	<xen:if is="{$previousThreadmark} || {$lastThreadmark}">
		<dl class="ctrlUnit">
			<dt>{xen:phrase threadmark_position_after}:</dt>
			<dd>
				<ol>
					<xen:if is="{$previousThreadmark}">
						<li><input type="radio" name="position" checked value="{xen:calc '{$previousThreadmark.threadmark_position} + 1'}">&nbsp;<a href="{xen:link 'threads/post-permalink', $thread, 'post={$previousThreadmark}'}" title="{xen:phrase threadmark_after_this_post}">{$previousThreadmark.label}</a></li>
					<xen:else />
						<li><input type="radio" name="position" checked value="1">&nbsp;{xen:phrase threadmark_insert_before_existing}</li>
					</xen:if>
			
					<xen:if is="{$lastThreadmark} && {$previousThreadmark.position} != {$lastThreadmark.position}">
						<li><input type="radio" name="position" value="{xen:calc '{$lastThreadmark.threadmark_position} + 1'}">&nbsp;<a href="{xen:link 'threads/post-permalink', $thread, 'post={$lastThreadmark}'}" title="{xen:phrase threadmark_end_of_index}">{$lastThreadmark.label}</a></li>
					</xen:if>
				</ol>
			</dd>
			
			<dt></dt>
			<dd>
				<label><input type="checkbox" name="reset_nesting" value="1"/> {xen:phrase threadmark_reset_nesting}</label>
			</dd>
		</dl>
	</xen:if>

	<dl class="ctrlUnit submitUnit">
		<dt></dt>
		<dd><input type="submit" value="{xen:phrase add_threadmark}" accesskey="s" class="button primary" /></dd>
	</dl>

	<input type="hidden" name="_xfToken" value="{$visitor.csrf_token_page}" />
</form>]]></template>
    <template title="new_threadmark_control" version_id="1040006" version_string="1.4.0"><![CDATA[<xen:if is="(!{$post.threadmark} and {$post.canAddThreadmarks}) or ({$post.threadmark} and ({$post.canEditThreadmarks} or {$post.canDeleteThreadmarks}))">
  <a href="{xen:link posts/threadmark, $post}" class="OverlayTrigger item control threadmark" data-cacheOverlay="false"><span></span>{xen:phrase threadmark}</a>
</xen:if>]]></template>
    <template title="page_nav_threadmarks" version_id="1040006" version_string="1.4.0"><![CDATA[<xen:if is="{$threadmarks}">
  <xen:if is="{$threadmarks.logged_in} OR {$threadmarks.hide_menu_from_guests} != '1'">
    <div class="Popup threadmarks JsOnly">
      <a href="{xen:link 'threads/threadmarks', $linkData}" rel="Menu" class="OverlayTrigger threadmarksTrigger">{xen:phrase threadmarks}</a>
      <div class="Menu threadmarksMenu">
        <xen:if is="{$threadmarks.more_threadmarks}">
          <div class="primaryContent menuHeader">
            <h4>{xen:phrase most_recent_threadmarks}:</h4>
          </div>
        </xen:if>

        <ul class="secondaryContent blockLinksList">
          <xen:foreach loop="{$threadmarks.recent}" value="{$threadmark}">
            <li class="threadmarkItem"><xen:if is="{$threadmark.isNew}"><strong class="newIndicator"><span></span>{xen:phrase new}</strong></xen:if>
                <a href="{xen:link threads/post-permalink, $linkData, 'post={$threadmark.post}'}"
                   class="{xen:if $linkData.hasPreview, PreviewTooltip}"
                   data-previewUrl="{xen:if $linkData.hasPreview, {xen:link posts/threadmarkpreview, $threadmark}}">{$threadmark.label}</a>
            </li>
          </xen:foreach>
        </ul>

        <xen:if is="{$threadmarks.more_threadmarks}">
          <div class="primaryContent menuHeader">
            <a href="{xen:link 'threads/threadmarks', $linkData}" rel="nofollow" class="OverlayTrigger">{xen:phrase view_all_threadmarks, 'count={$threadmarks.count}'}</a>
          </div>
        </xen:if>
      </div>
    </div>

    <noscript>
      <a href="{xen:link 'threads/threadmarks', $linkData}" rel="nofollow" class="threadmarksTrigger">{xen:phrase threadmarks}</a>
    </noscript>
  <xen:else/>
    <a href="{xen:link 'threads/threadmarks', $linkData}" rel="nofollow" class="OverlayTrigger threadmarksTrigger">{xen:phrase threadmarks}</a>
  </xen:if>
  <xen:include template="preview_tooltip" />
<xen:if is="{$debugMode}">
	<xen:require js="js/sidane/threadmarks/full/threadmarks.js" />
<xen:else />
	<xen:require js="js/sidane/threadmarks/threadmarks.js" />
</xen:if>
</xen:if>]]></template>
    <template title="quick_reply_threadmark" version_id="1040006" version_string="1.4.0"><![CDATA[<xen:if is="{$debugMode}">
	<xen:require js="js/sidane/threadmarks/full/threadmarks.js" />
<xen:else />
	<xen:require js="js/sidane/threadmarks/threadmarks.js" />
</xen:if>

<dl class="ctrlUnit">
	<dt><label for="ctrl_threadmark">{xen:phrase threadmark_label}:</label></dt>
	<dd><input type="text" name="threadmark" id="ctrl_threadmark" class="textCtrl" value="{$draftThreadmarkLabel}" maxlength="255" /></dd>
</dl>

<dl class="ctrlUnit">
	<dt><label for="ctrl_threadmark_category_id">{xen:phrase sidane_threadmark_category}:</label></dt>
	<dd>
		<select name="threadmark_category_id" class="textCtrl OptOut" id="ctrl_threadmark_category_id">
			<option value="0"></option>
			<xen:foreach loop="$threadmarkCategoryOptions" key="$threadmarkCategoryId" value="$threadmarkCategoryOption">
				<option value="{$threadmarkCategoryId}" {xen:selected '{$threadmarkCategoryId} == {$draftThreadmarkCategoryId}'}>{$threadmarkCategoryOption}</option>
			</xen:foreach>
		</select>
	</dd>
</dl>]]></template>
    <template title="quick_reply_threadmark.css" version_id="1020000" version_string="1.2.0"><![CDATA[.threadmark .ctrlUnit > dd
{
	width: {xen:property ctrlUnitValueWidth};
	box-sizing: border-box;
	float:left;
	padding-right: {xen:property ctrlUnitEdgeSpacer};
}

.threadmark .ctrlUnit > dd .textCtrl
{
	box-sizing: border-box;
	width: 100%;
}


.threadmark .ctrlUnit > dt
{
	{xen:property ctrlUnitLabel}
	box-sizing: border-box;
	float:left;
}

/* clearfix */
.threadmark .ctrlUnit
{
	overflow: auto;
	zoom: 1;
}]]></template>
    <template title="search_result_threadmark" version_id="11" version_string="1.1.8"><![CDATA[<li id="threadmark-{$threadmark.post_id}" class="searchResult post primaryContent{xen:if $post.isIgnored, ' ignored'}" data-author="{$threadmark.username}">

	<div class="listBlock posterAvatar"><xen:avatar user="$post" size="s" img="true" /></div>

	<div class="listBlock main">
		<div class="titleText">
			<span class="contentType">{xen:phrase threadmark}</span>
			<h3 class="title{xen:if {$threadmark.isNew}, ' new'}"><a href="{xen:link posts, $post}">{xen:helper threadPrefix, $thread}{xen:helper highlight, $thread.title, $search.search_query, 'highlight'}</a></h3>
		</div>

		<blockquote class="snippet">
			<a href="{xen:link posts, $post}">{xen:helper snippet, $threadmark.label, 150, {xen:array 'term={$search.search_query}', 'emClass=highlight', 'stripQuote=1'}}</a>
		</blockquote>

		<div class="meta">
			<xen:if is="{$enableInlineMod} AND {$post.canInlineMod}"><input type="checkbox" name="posts[]" value="{$threadmark.post_id}" class="InlineModCheck" data-target="#post-{$threadmark.post_id}" title="{xen:phrase select_this_threadmark_by_x, 'name={$threadmark.username}'}" /></xen:if>
			{xen:phrase post_by}: <xen:username user="$threadmark" />,
			<xen:datetime time="{$threadmark.threadmark_date}" />
			{xen:phrase in_forum}: <a href="{xen:link forums, $forum}">{$forum.title}</a>
		</div>
	</div>
</li>]]></template>
    <template title="single_page_thread_threadmarks_menu" version_id="2" version_string="1.0"><![CDATA[<xen:if is="{$singlePageThread}">
  <div class="PageNav threadmarksSinglePage">
    <xen:include template="page_nav_threadmarks">
      <xen:map from="$thread.recentThreadmarks" to="$threadmarks"/>
      <xen:map from="$thread" to="$linkData"/>
    </xen:include>
  </div>
</xen:if>]]></template>
    <template title="threadmarks" version_id="1040006" version_string="1.4.0"><![CDATA[<xen:title>{xen:phrase threadmarks_for}: {xen:helper threadPrefix, $thread, escaped}{$thread.title}</xen:title>

<xen:h1>{xen:helper threadPrefix, $thread} {xen:phrase threadmarks_for}: {$thread.title}
	<xen:if is="{$canEditThreadMarks}">
		<i class="fa fa-unlock Tooltip" style="display:none" title="{xen:phrase click_to_lock}"></i>
		<i class="fa fa-lock Tooltip" style="display:none" title="{xen:phrase click_to_unlock}"></i>
	</xen:if>
</xen:h1>

<xen:navigation>
	<xen:breadcrumb source="$nodeBreadCrumbs" />
	<xen:breadcrumb href="{xen:link threads, $thread}">{xen:helper threadPrefix, $thread}{$thread.title}</xen:breadcrumb>
</xen:navigation>

<xen:container var="$head.noindex">
	<meta name="robots" content="noindex" />
</xen:container>

<xen:require css="threadmarks.css" />

<xen:if is="{$canEditThreadMarks}">
	<xen:require css="jstree.css" />
	<xen:require js="js/jsTree/jstree.min.js" />

	<xen:if is="{$debugMode}">
		<xen:require js="js/sidane/threadmarks/full/threadmarks.js" />
	<xen:else />
		<xen:require js="js/sidane/threadmarks/threadmarks.js" />
	</xen:if>
</xen:if>

<div class="threadmarks section">
	<ol class="tabs">
		<xen:foreach loop="$threadmarkCategories" key="$threadmarkCategoryId" value="$threadmarkCategory">
			<li class="{xen:if '{$threadmarkCategoryId} == {$activeThreadmarkCategory.threadmark_category_id}', 'active'}">
				<h4>
					<a
						href="{xen:link threads/threadmarks, $thread, 'category_id={$threadmarkCategoryId}'}"
						class="OverlayTrigger"
						data-cacheOverlay="true"
					>
						{$threadmarkCategory.title}
					</a>
				</h4>
			</li>
		</xen:foreach>

		<xen:if is="{$canEditThreadMarks}">
			<li class="sortTreeButton EditSortTree">
				<a href="#">{xen:phrase sidane_edit_display_order}</a>
			</li>

			<li class="sortTreeButton SaveSortTree">
				<a href="#">{xen:phrase sidane_save_display_order}</a>
			</li>
		</xen:if>
	</ol>

	<ol class="threadmarkList overlayScroll">
		<xen:foreach loop="$threadmarks" value="$threadmark">
			<li class="primaryContent threadmarkListItem _depth{$threadmark.depth}">
				<xen:if is="{$threadmark.isNew}"><strong class="newIndicator"><span></span>{xen:phrase new}</strong></xen:if>
				<a
					href="{xen:link threads/post-permalink, $thread, 'post={$threadmark.post}'}"
        				class="{xen:if $thread.hasPreview, PreviewTooltip}"
            				data-previewUrl="{xen:if $thread.hasPreview, {xen:link posts/threadmarkpreview, $threadmark}}"
            			>
            				{$threadmark.label}
            			</a>

             			<div class="extra muted">
					<xen:datetime time="{$threadmark.post.post_date}" />
				</div>
			</li>
		</xen:foreach>
	</ol>

	<xen:if is="{$canEditThreadMarks}">
		<div class="ThreadmarkSortTree"
			data-threadmarklist=".threadmarkList"
			data-editbutton=".EditSortTree"
			data-savebutton=".SaveSortTree"
			data-loadurl="{xen:link threads/threadmarks-load-tree, $thread, 'category_id={$activeThreadmarkCategory.threadmark_category_id}'}"
			data-syncurl="{xen:link threads/threadmarks-sync-tree, $thread, 'category_id={$activeThreadmarkCategory.threadmark_category_id}'}"
			data-indexurl="{xen:link threads/threadmarks, $thread, 'category_id={$activeThreadmarkCategory.threadmark_category_id}'}"
		></div>
	</xen:if>

	<xen:include template="preview_tooltip" />

	<div class="sectionFooter overlayOnly"><a class="button primary OverlayCloser">{xen:phrase close}</a></div>
</div>]]></template>
    <template title="threadmarks.css" version_id="1040006" version_string="1.4.0"><![CDATA[.PageNav.threadmarksSinglePage
{
	float: left;
	min-width: 0;
}

.PageNav a.threadmarksTrigger
{
	width: auto !important;
	padding-left: 4px;
	padding-right: 4px;
}

.threadmarksMenu h4
{
	font-size: 14px;
	font-weight: bold;
	background-color: transparent;
}

.messageList .message.hasThreadmark
{
	padding-top: 0;
	border-top: 0;
}

.threadmarker
{
	{xen:property Threadmarker}
	display: flex;
	align-items: flex-end ;
}

.threadmarker .label
{
	display: inline-block;
	wordwrap: broken-word;
	word-break: break-word;
	overflow-x: hidden ;
	align-self: flex-start ;
	flex-basis: auto ;
	flex-grow: 0 ;
	flex-shrink: 1 ;
	{xen:property ThreadmarkLabel}
}

.threadmarker .label strong
{
	{xen:property ThreadmarkLabelStrong}
}

.threadmarker_nav_top
{
	display: flex;
	flex-wrap: nowrap;
	flex-basis: auto ;
	flex-grow: 0 ;
	flex-shrink: 0 ;
	margin-left: auto ;
	justify-content: flex-end ;
}

.threadmarker .history
{
	flex-basis: auto ;
	flex-grow: 0 ;
	flex-shrink: 0 ;
}

.threadmarker_nav_bottom .previous a,
.threadmarker_nav_bottom .index a,
.threadmarker_nav_bottom .next a,
.threadmarker_nav_top .previous a,
.threadmarker_nav_top .index a,
.threadmarker_nav_top .next a,
.threadmarker .history a
{
	{xen:property ThreadmarkButtons}
}

.threadmarker .history a
{
	{xen:property ThreadmarkHistory}
}

.threadmarker_nav_bottom
{
	overflow:hidden;
	float:none;
	text-align:right;
	padding: 15px 0px 5px 0px;
}

.threadmarker_nav_bottom .previous a,
.threadmarker_nav_bottom .index a,
.threadmarker_nav_bottom .next a,
.threadmarker_nav_top .previous a,
.threadmarker_nav_top .index a,
.threadmarker_nav_top .next a
{
	{xen:property ThreadmarkIndexButtons}
}

.threadmarker_nav_top .previous a,
.threadmarker_nav_top .index a,
.threadmarker_nav_top .next a
{
	margin: 0 0 0 4px;
	border-bottom-left-radius: 0px;
	border-bottom-right-radius: 0px;
}

.threadmarker_nav_bottom .previous a:hover,
.threadmarker_nav_bottom .index a:hover,
.threadmarker_nav_bottom .next a:hover,
.threadmarker_nav_top .previous a:hover,
.threadmarker_nav_top .index a:hover,
.threadmarker_nav_top .next a:hover,
.threadmarker .history a:hover
{
	{xen:property ThreadmarkButtonHover}
}

<xen:if is="{xen:property enableResponsive}">
  @media (max-width:{xen:property maxResponsiveWideWidth})
  {
    .Responsive .PageNav a.threadmarksTrigger
    {
      clear: left;
      margin-top: 7px;
    }
  }

  @media (max-width:{xen:property maxResponsiveNarrowWidth})
  {
    .threadmarker
    {
      flex-wrap: wrap;
    }

    .threadmarker .label
    {
      display: block;
      max-width: 100% ;
      width:100%;
    }

    .threadmarker .history a
    {
      margin:0 0 0 0 ;
    }

    .threadmarker .history a:hover
    {
      margin:0 0 0 0 ;
    }

    .threadmarker_nav_top .previous a,
    .threadmarker_nav_top .index a,
    .threadmarker_nav_top .next a,
    .threadmarker .history a
    {
      border-top-left-radius: 0px;
      border-top-right-radius: 0px;
    }

    .threadmarker_nav_top .previous a:hover,
    .threadmarker_nav_top .index a:hover,
    .threadmarker_nav_top .next a:hover,
    .threadmarker .history a:hover
    {
      border-top-left-radius: 0px;
      border-top-right-radius: 0px;
    }
  }
</xen:if>


.threadmarks .primaryContent { padding: 10px 0; }

.threadmarks ._depth0 { padding-left: 10px; }
.threadmarks ._depth1 { padding-left: 42px; }
.threadmarks ._depth2 { padding-left: 74px; }
.threadmarks ._depth3 { padding-left: 106px; }
.threadmarks ._depth4 { padding-left: 138px; }
.threadmarks ._depth5 { padding-left: 170px; }
.threadmarks ._depth6 { padding-left: 202px; }
.threadmarks ._depth7 { padding-left: 234px; }
.threadmarks ._depth8 { padding-left: 266px; }
.threadmarks ._depth9 { padding-left: 298px; }

li.threadmarkListItem .extra
{
	float: right;
	font-size: 11px;
	padding-right: 10px;
}

li.threadmarkListItem .newIndicator
{
		{xen:property messageNewIndicatorThreadmarks}
}

li.threadmarkListItem .newIndicator span
{
		{xen:property messageNewIndicatorInnerThreadmarks}
}

.threadmarks .tabs li.sortTreeButton
{
	float: right;
}

.threadmarks .tabs li.sortTreeButton a
{
	background: transparent;
	border-color: transparent;
	color: {xen:property primaryMedium};
}

.ThreadmarkSortTree
{
	{xen:property ThreadmarkSortable}
}

.ThreadmarkSortTree .jstree-anchor,
.ThreadmarkSortTree .jstree-anchor:link,
.ThreadmarkSortTree .jstree-anchor:visited,
.ThreadmarkSortTree .jstree-anchor:hover,
.ThreadmarkSortTree .jstree-anchor:active
{
	{xen:property ThreadmarkJSTree}
}]]></template>
    <template title="threadmarks_nav" version_id="1040006" version_string="1.4.0"><![CDATA[<xen:if is="{$xenOptions.sidaneThreadmarksNavLinks}">
	<xen:if is="{$threadmark.position} != 1">
		<span class="previous">
			<xen:if is="{$post.threadmark_previous}">
				<a
					href="{xen:link threads/post-permalink, $thread, 'post={$post.threadmark_previous}'}"
					{xen:if $thread.hasPreview, "class='RightPreviewTooltip' data-previewUrl='{xen:link posts/threadmarkpreview, $post.threadmark_previous}'"}
				>
					{xen:phrase threadmark_previous}
				</a>
			<xen:else/>
				<a href="{xen:link posts/PreviousThreadmark, $post}">{xen:phrase threadmark_previous}</a>
			</xen:if>
		</span>
	</xen:if>

	<span class="index"><a href="{xen:link 'threads/threadmarks', $thread, 'category_id={$threadmark.threadmark_category_id}'}" rel="nofollow" class="OverlayTrigger">{xen:phrase threadmark_index}</a></span>

	<xen:if is="{$threadmark.position} != {$threadmarkCategoryPositions.{$threadmark.threadmark_category_id}}">
		<span class="next">
			<xen:if is="{$post.threadmark_next}">
				<a
					href="{xen:link threads/post-permalink, $thread, 'post={$post.threadmark_next}'}"
					{xen:if $thread.hasPreview, "class='RightPreviewTooltip' data-previewUrl='{xen:link posts/threadmarkpreview, $post.threadmark_next}'"}
				>
					{xen:phrase threadmark_next}
				</a>
			<xen:else/>
				<a href="{xen:link posts/NextThreadmark, $post}">{xen:phrase threadmark_next}</a>
			</xen:if>
		</span>
	</xen:if>
</xen:if>]]></template>
    <template title="threadmarks_nav_bottom" version_id="10" version_string="1.1.7c"><![CDATA[<xen:if is="{$threadmark} and {$post.canViewThreadmarks}">
  <div class="threadmarker_nav_bottom">
    <xen:include template="threadmarks_nav" />
  </div>
</xen:if>]]></template>
    <template title="threadmarks_nav_top" version_id="10" version_string="1.1.7c"><![CDATA[<xen:if is="{$post.canViewThreadmarks}">
  <div class="threadmarker_nav_top">
    <xen:include template="threadmarks_nav" />
  </div>
</xen:if>]]></template>
    <template title="threadmarks_render_flag" version_id="1040006" version_string="1.4.0"><![CDATA[<xen:if is="{$threadmark} and {$post.canViewThreadmarks}">
	<div class="threadmarker ToggleTriggerAnchor">
		<span class="label" title="{xen:phrase threadmark_created_by_x_on_y, 'name={$threadmark.username}', 'date={xen:datetime $threadmark.threadmark_date}'}">
			<strong>{$threadmarkCategories.{$threadmark.threadmark_category_id}.title}:</strong> {$threadmark.label}
		</span>

		<xen:if is="{$threadmark.edit_count} && {$post.canEditThreadmarks}">
			<span class="history">
				<a href="{xen:link posts/threadmarkHistory, $post}" class="item control ToggleTrigger history" data-cacheOverlay="false">{xen:phrase threadmark_history}</a>
			</span>
		</xen:if>

		<xen:include template="threadmarks_nav_top"/>
	</div>
</xen:if>]]></template>
    <template title="threadmark_preview" version_id="10" version_string="1.1.7"><![CDATA[<div class="previewTooltip">
	<xen:avatar user="$post" size="s" />

	<div class="text">
		<blockquote class="previewText">{xen:string nl2br, {$threadmark.label}}<hr/>{xen:string nl2br, {xen:helper wordtrim, $post.messageParsed, $xenOptions.discussionPreviewLength}}</blockquote>

		<div class="posterDate muted">{$post.username}, <xen:datetime time="{$post.post_date}" class="faint" /></div>
	</div>
</div>]]></template>
  </templates>
  <public_template_modifications>
    <modification template="post" modification_key="sidaneThreadmarkPostControl" description="Add 'Threadmarks' link to post controls" execution_order="10" enabled="1" action="str_replace">
      <find><![CDATA[<xen:if is="{$post.canReport}">]]></find>
      <replace><![CDATA[<xen:include template="new_threadmark_control"/>
$0]]></replace>
    </modification>
    <modification template="thread_view" modification_key="sidaneThreadmarksCss" description="Add threadmarks CSS to threads with threadmarks" execution_order="10" enabled="1" action="str_replace">
      <find><![CDATA[<xen:container var="$head.canonical">]]></find>
      <replace><![CDATA[<xen:require css="threadmarks.css"/>
$0]]></replace>
    </modification>
    <modification template="thread_view" modification_key="sidaneThreadmarksMenuOnSinglePageThreads" description="Display threadmarks menu on single page threads" execution_order="10" enabled="1" action="str_replace">
      <find><![CDATA[<xen:pagenav]]></find>
      <replace><![CDATA[<xen:include template="single_page_thread_threadmarks_menu"/>

$0]]></replace>
    </modification>
    <modification template="message" modification_key="sidaneThreadmarksMessageMod2" description="Add CSS class to posts with threadmark" execution_order="10" enabled="1" action="str_replace">
      <find><![CDATA[{xen:if $message.isIgnored, ignored}]]></find>
      <replace><![CDATA[$0
{xen:if $message.threadmark, hasThreadmark}]]></replace>
    </modification>
    <modification template="page_nav" modification_key="sidaneThreadmarksModification" description="Display threadmarks menu on multi-page threads" execution_order="100" enabled="1" action="str_replace">
      <find><![CDATA[<xen:if is="{$unreadLinkHtml}">
		<a href="{xen:raw $unreadLinkHtml}" class="text distinct unreadLink">{xen:phrase go_to_first_unread}</a>
	</xen:if>]]></find>
      <replace><![CDATA[$0
<xen:include template="page_nav_threadmarks">
  <xen:map from="$linkData.recentThreadmarks" to="$threadmarks" />
</xen:include>]]></replace>
    </modification>
    <modification template="message" modification_key="sidaneThreadmarksModification1" description="Add flag before threadmarked post" execution_order="10" enabled="1" action="str_replace">
      <find><![CDATA[data-author="{$message.username}">]]></find>
      <replace><![CDATA[$0
<xen:include template="threadmarks_render_flag">
  <xen:map from="$post.threadmark" to="$threadmark" />
</xen:include>]]></replace>
    </modification>
    <modification template="message" modification_key="sidaneThreadmarksModification2" description="Add threadmark nav to bottem of the post" execution_order="10" enabled="1" action="str_replace">
      <find><![CDATA[<xen:if is="{$message.last_edit_date}">]]></find>
      <replace><![CDATA[<xen:include template="threadmarks_nav_bottom">
  <xen:map from="$post.threadmark" to="$threadmark" />
</xen:include>
$0]]></replace>
    </modification>
    <modification template="thread_reply" modification_key="thread_reply_threadmark" description="Add threadmarks on reply" execution_order="10" enabled="1" action="str_replace">
      <find><![CDATA[<!-- slot: after_guest -->]]></find>
      <replace><![CDATA[$0
<xen:if is="{$canAddThreadmark}">
<xen:include template="quick_reply_threadmark" />
</xen:if>]]></replace>
    </modification>
    <modification template="quick_reply" modification_key="threadmarks_quick_reply" description="Add threadmarks on quick reply" execution_order="10" enabled="1" action="str_replace">
      <find><![CDATA[{xen:raw $qrEditor}]]></find>
      <replace><![CDATA[<xen:if is="{$canAddThreadmark}">
<xen:require css="quick_reply_threadmark.css" />
<div class="threadmark">
<xen:include template="quick_reply_threadmark" />
</div>
</xen:if>
$0]]></replace>
    </modification>
  </public_template_modifications>
  <bb_code_media_sites/>
  <bb_codes/>
</addon>
