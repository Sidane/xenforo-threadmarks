!function(e,o,t,r){e.tools.tooltip.addEffect("RightPreviewTooltip",function(t){var r=this.getTrigger().offset(),i=this.getConf(),a={top:"auto",bottom:e(o).height()-r.top+i.offset[0]},n=e(o).width()<480;n?a.left=Math.min(50,r.left+i.offset[1]):(a.right=e("html").width()-this.getTrigger().outerWidth()-r.left-i.offset[1],a.left="auto");var l=this.getTip();l.css(a);var d=e(o).scrollTop()-r.top+i.offset[0]+l.outerHeight();if(d>=0&&l.css({top:r.top+i.offset[0]+this.getTrigger().outerHeight(),bottom:"auto"}),!n){var s=l.find(".arrow");d>=0?s.hide():s.css({left:l.width()-i.offset[1]-s.outerWidth(),top:"auto"})}l.xfFadeIn(XenForo.speed.normal)},function(e){this.getTip().xfFadeOut(XenForo.speed.fast)}),XenForo.RightPreviewTooltip=function(o){var r,i,a;if(parseInt(XenForo._enableOverlays)){if(!(i=o.data("previewurl")))return void console.warn("Preview tooltip has no preview: %o",o);o.find("[title]").andSelf().attr("title",""),o.bind({mouseenter:function(n){r||(a=setTimeout(function(){if(!r){r=!0;var a,n,l=e("#PreviewTooltip");if(!l.length)return void console.error("Unable to find #PreviewTooltip");console.log("Setup preview tooltip for %s",i),a=l.clone().removeAttr("id").addClass("xenPreviewTooltip").appendTo(t.body),XenForo._PreviewTooltipCache[i]||(n=XenForo.ajax(i,{},function(o){XenForo.hasTemplateHtml(o)?(XenForo._PreviewTooltipCache[i]=o.templateHtml,e(o.templateHtml).xfInsert("replaceAll",a.find(".PreviewContents"))):a.remove()},{type:"GET",error:!1,global:!1})),o.tooltip(XenForo.configureTooltipRtl({predelay:500,delay:0,effect:"RightPreviewTooltip",fadeInSpeed:"normal",fadeOutSpeed:"fast",tip:a,position:"bottom right",offset:[10,15]})),o.data("tooltip").show(0),XenForo._PreviewTooltipCache[i]&&e(XenForo._PreviewTooltipCache[i]).xfInsert("replaceAll",a.find(".PreviewContents"),"show",0)}},800))},mouseleave:function(e){return r?void(o.data("tooltip")&&o.data("tooltip").hide()):void(a&&clearTimeout(a))},mousedown:function(e){a&&clearTimeout(a),o.data("tooltip")&&o.data("tooltip").hide()}})}},XenForo.ThreadmarkSortable=function(o){var t=o.data("sort-url"),r="li.sortableItem";return t?void o.sortable({items:r,forcePlaceholderSize:!0}).bind({sortupdate:function(r){var i=[];o.find("[data-item-id]").each(function(o){var t=e(this),r=t.data("item-id"),a=t.parent().data("parent-id");void 0!==a?i[o]=[r,a]:i[o]=r}),o.data("sort-timer")&&clearTimeout(o.data("sort-timer")),o.data("sort-timer",setTimeout(function(){XenForo.ajax(t,{order:i},function(e){console.info("drag order updated")})},100))},dragstart:function(e){console.log("drag start, %o",e.target)},dragend:function(e){console.log("drag end")}}):void console.log("No data-sort-url for sortable.")},XenForo.isTouchBrowser()||XenForo.register(".RightPreviewTooltip","XenForo.RightPreviewTooltip"),XenForo.register(".ThreadmarkSortable","XenForo.ThreadmarkSortable")}(jQuery,this,document);